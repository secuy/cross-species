{"version":3,"file":"js/app.5a7db648.js","mappings":"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","sources":["webpack://cross_species_platform/./src/App.vue","webpack://cross_species_platform/./src/components/ThreeWorld.vue","webpack://cross_species_platform/./src/components/ThreeWorld/index.vue","webpack://cross_species_platform/./src/utils/lightManager.js","webpack://cross_species_platform/./src/utils/materialManager.js","webpack://cross_species_platform/./src/utils/cordTrans.js","webpack://cross_species_platform/./src/utils/giftiParser.js","webpack://cross_species_platform/./src/utils/colorManager.js","webpack://cross_species_platform/./src/utils/cameraManager.js","webpack://cross_species_platform/./src/utils/tckParser.js","webpack://cross_species_platform/./src/components/ThreeWorld/ThreeWorld.js","webpack://cross_species_platform/src/components/ThreeWorld/index.vue","webpack://cross_species_platform/./src/components/ThreeWorld/index.vue?b36b","webpack://cross_species_platform/./src/components/ThreeWorld/index.vue?4e60","webpack://cross_species_platform/src/components/ThreeWorld.vue","webpack://cross_species_platform/./src/components/ThreeWorld.vue?f517","webpack://cross_species_platform/./src/components/ThreeWorld.vue?bfd7","webpack://cross_species_platform/src/App.vue","webpack://cross_species_platform/./src/App.vue?c036","webpack://cross_species_platform/./src/App.vue?0e40","webpack://cross_species_platform/./src/main.js","webpack://cross_species_platform/webpack/bootstrap","webpack://cross_species_platform/webpack/runtime/chunk loaded","webpack://cross_species_platform/webpack/runtime/compat get default export","webpack://cross_species_platform/webpack/runtime/define property getters","webpack://cross_species_platform/webpack/runtime/global","webpack://cross_species_platform/webpack/runtime/hasOwnProperty shorthand","webpack://cross_species_platform/webpack/runtime/jsonp chunk loading","webpack://cross_species_platform/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('ThreeWorld',{attrs:{\"msg\":\"Surface and Tractography 3D Viewer\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ThreeWorld',{attrs:{\"msg\":_vm.msg}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"three-world\"},[_c('h1',[_vm._v(_vm._s(_vm.msg))]),_c('div',{staticClass:\"canvas-container\"},[_c('div',{staticClass:\"canvas-section\"},[_c('div',{ref:\"threeContainerLeft\",staticClass:\"three-container\",attrs:{\"id\":\"three-container-left\"}}),_c('div',{staticClass:\"control-panel\"},[_c('div',{staticClass:\"view-controls\"},[_c('div',{staticClass:\"control-group\"},[_c('button',{on:{\"click\":_vm.resetViewLeft}},[_vm._v(\"重置视图\")]),_c('button',{class:{ active: _vm.viewModeLeft === 'inspect' },on:{\"click\":_vm.toggleViewModeLeft}},[_vm._v(\" \"+_vm._s(_vm.viewModeLeft === 'browse' ? '检查模式' : '浏览模式')+\" \")]),_c('button',{class:{ active: _vm.surfaceCheckTagLeft },attrs:{\"disabled\":!(_vm.hasSurfaceLeft && _vm.hasLabelsLeft)},on:{\"click\":_vm.surfaceCheckLeft}},[_vm._v(\" \"+_vm._s(_vm.surfaceCheckTagLeft ? '取消' : '皮层检查')+\" \")])]),_c('div',{staticClass:\"opacity-control\"},[_c('label',[_vm._v(\"皮层透明度\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.opacityLeft),expression:\"opacityLeft\"}],attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.01\"},domProps:{\"value\":(_vm.opacityLeft)},on:{\"input\":_vm.updateOpacityLeft,\"__r\":function($event){_vm.opacityLeft=$event.target.value}}})]),(_vm.viewModeLeft === 'inspect' && _vm.vertexInfoLeft)?_c('div',{staticClass:\"vertex-info\"},[_c('h3',[_vm._v(\"顶点信息\")]),_c('p',[_vm._v(\"索引: \"+_vm._s(_vm.vertexInfoLeft.index))]),_c('p',[_vm._v(\"位置: X: \"+_vm._s(_vm.vertexInfoLeft.position.x)+\", Y: \"+_vm._s(_vm.vertexInfoLeft.position.y)+\", Z: \"+_vm._s(_vm.vertexInfoLeft.position.z))]),(_vm.vertexInfoLeft.label !== undefined)?_c('p',[_vm._v(\"标签: \"+_vm._s(_vm.vertexInfoLeft.label))]):_vm._e(),(_vm.vertexInfoLeft.color)?_c('p',[_vm._v(\"颜色: R: \"+_vm._s(_vm.vertexInfoLeft.color.r)+\", G: \"+_vm._s(_vm.vertexInfoLeft.color.g)+\", B: \"+_vm._s(_vm.vertexInfoLeft.color.b))]):_vm._e()]):_vm._e(),(_vm.surfaceCheckTagLeft && _vm.vertexInfoLeft)?_c('div',{staticClass:\"vertex-info\"},[_c('h3',[_vm._v(\"顶点信息\")]),_c('p',[_vm._v(\"索引: \"+_vm._s(_vm.vertexInfoLeft.index))]),_c('p',[_vm._v(\"位置: X: \"+_vm._s(_vm.vertexInfoLeft.position.x)+\", Y: \"+_vm._s(_vm.vertexInfoLeft.position.y)+\", Z: \"+_vm._s(_vm.vertexInfoLeft.position.z))]),(_vm.vertexInfoLeft.label !== undefined)?_c('p',[_vm._v(\"标签: \"+_vm._s(_vm.vertexInfoLeft.label))]):_vm._e(),(_vm.vertexInfoLeft.color)?_c('p',[_vm._v(\"颜色: R: \"+_vm._s(_vm.vertexInfoLeft.color.r)+\", G: \"+_vm._s(_vm.vertexInfoLeft.color.g)+\", B: \"+_vm._s(_vm.vertexInfoLeft.color.b))]):_vm._e()]):_vm._e()]),_c('div',{staticClass:\"file-upload\"},[_c('div',{staticClass:\"upload-group\"},[_c('label',[_vm._v(\"表面文件(.surf.gii)\")]),_c('select',[_c('option',{attrs:{\"disabled\":\"\",\"value\":\"\"}},[_vm._v(\"请选择文件\")]),_vm._l((_vm.surfSysFiles),function(surf_sys_file){return _c('option',{key:surf_sys_file,domProps:{\"value\":surf_sys_file}},[_vm._v(\" \"+_vm._s(surf_sys_file)+\" \")])})],2),_c('input',{ref:\"surfInputLeft\",staticClass:\"inputFileLabel\",attrs:{\"type\":\"file\",\"accept\":\".surf.gii\"},on:{\"change\":_vm.handleSurfaceUploadLeft}}),_c('button',{attrs:{\"disabled\":!_vm.hasSurfaceLeft},on:{\"click\":_vm.discardSurfaceLeft}},[_vm._v(\"丢弃皮层\")])]),_c('div',{staticClass:\"upload-group\"},[_c('label',[_vm._v(\"标签文件(.label.gii)\")]),_c('input',{ref:\"labelInputLeft\",staticClass:\"inputFileLabel\",attrs:{\"type\":\"file\",\"accept\":\".label.gii\"},on:{\"change\":_vm.handleLabelUploadLeft}}),_c('button',{attrs:{\"disabled\":!_vm.hasLabelsLeft},on:{\"click\":_vm.discardLabelsLeft}},[_vm._v(\"丢弃标签\")])]),_c('div',{staticClass:\"upload-group\"},[_c('label',[_vm._v(\"纤维文件(.tck)\")]),_c('input',{ref:\"tckInputLeft\",staticClass:\"inputFileLabel\",attrs:{\"type\":\"file\",\"accept\":\".tck\",\"multiple\":\"\"},on:{\"change\":_vm.handleTCKUploadLeft}}),_c('button',{attrs:{\"disabled\":!_vm.hasFibersLeft},on:{\"click\":_vm.clearFibersLeft}},[_vm._v(\"清空纤维\")])])])])]),_c('div',{staticClass:\"canvas-section\"},[_c('div',{ref:\"threeContainerRight\",staticClass:\"three-container\",attrs:{\"id\":\"three-container-right\"}}),_c('div',{staticClass:\"control-panel\"},[_c('div',{staticClass:\"view-controls\"},[_c('div',{staticClass:\"control-group\"},[_c('button',{on:{\"click\":_vm.resetViewRight}},[_vm._v(\"重置视图\")]),_c('button',{class:{ active: _vm.viewModeRight === 'inspect' },on:{\"click\":_vm.toggleViewModeRight}},[_vm._v(\" \"+_vm._s(_vm.viewModeRight === 'browse' ? '检查模式' : '浏览模式')+\" \")]),_c('button',{class:{ active: _vm.surfaceCheckTagRight },attrs:{\"disabled\":!(_vm.hasSurfaceRight && _vm.hasLabelsRight)},on:{\"click\":_vm.surfaceCheckRight}},[_vm._v(\" \"+_vm._s(_vm.surfaceCheckTagRight ? '取消' : '皮层检查')+\" \")])]),_c('div',{staticClass:\"opacity-control\"},[_c('label',[_vm._v(\"皮层透明度\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.opacityRight),expression:\"opacityRight\"}],attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.01\"},domProps:{\"value\":(_vm.opacityRight)},on:{\"input\":_vm.updateOpacityRight,\"__r\":function($event){_vm.opacityRight=$event.target.value}}})]),(_vm.viewModeRight === 'inspect' && _vm.vertexInfoRight)?_c('div',{staticClass:\"vertex-info\"},[_c('h3',[_vm._v(\"顶点信息\")]),_c('p',[_vm._v(\"索引: \"+_vm._s(_vm.vertexInfoRight.index))]),_c('p',[_vm._v(\"位置: X: \"+_vm._s(_vm.vertexInfoRight.position.x)+\", Y: \"+_vm._s(_vm.vertexInfoRight.position.y)+\", Z: \"+_vm._s(_vm.vertexInfoRight.position.z))]),(_vm.vertexInfoRight.label !== undefined)?_c('p',[_vm._v(\"标签: \"+_vm._s(_vm.vertexInfoRight.label))]):_vm._e(),(_vm.vertexInfoRight.color)?_c('p',[_vm._v(\"颜色: R: \"+_vm._s(_vm.vertexInfoRight.color.r)+\", G: \"+_vm._s(_vm.vertexInfoRight.color.g)+\", B: \"+_vm._s(_vm.vertexInfoRight.color.b))]):_vm._e()]):_vm._e(),(_vm.surfaceCheckTagRight && _vm.vertexInfoRight)?_c('div',{staticClass:\"vertex-info\"},[_c('h3',[_vm._v(\"顶点信息\")]),_c('p',[_vm._v(\"索引: \"+_vm._s(_vm.vertexInfoRight.index))]),_c('p',[_vm._v(\"位置: X: \"+_vm._s(_vm.vertexInfoRight.position.x)+\", Y: \"+_vm._s(_vm.vertexInfoRight.position.y)+\", Z: \"+_vm._s(_vm.vertexInfoRight.position.z))]),(_vm.vertexInfoRight.label !== undefined)?_c('p',[_vm._v(\"标签: \"+_vm._s(_vm.vertexInfoRight.label))]):_vm._e(),(_vm.vertexInfoRight.color)?_c('p',[_vm._v(\"颜色: R: \"+_vm._s(_vm.vertexInfoRight.color.r)+\", G: \"+_vm._s(_vm.vertexInfoRight.color.g)+\", B: \"+_vm._s(_vm.vertexInfoRight.color.b))]):_vm._e()]):_vm._e()]),_c('div',{staticClass:\"file-upload\"},[_c('div',{staticClass:\"upload-group\"},[_c('label',[_vm._v(\"表面文件(.surf.gii)\")]),_c('input',{ref:\"surfInputRight\",staticClass:\"inputFileLabel\",attrs:{\"type\":\"file\",\"accept\":\".surf.gii\"},on:{\"change\":_vm.handleSurfaceUploadRight}}),_c('button',{attrs:{\"disabled\":!_vm.hasSurfaceRight},on:{\"click\":_vm.discardSurfaceRight}},[_vm._v(\"丢弃皮层\")])]),_c('div',{staticClass:\"upload-group\"},[_c('label',[_vm._v(\"标签文件(.label.gii)\")]),_c('input',{ref:\"labelInputRight\",staticClass:\"inputFileLabel\",attrs:{\"type\":\"file\",\"accept\":\".label.gii\"},on:{\"change\":_vm.handleLabelUploadRight}}),_c('button',{attrs:{\"disabled\":!_vm.hasLabelsRight},on:{\"click\":_vm.discardLabelsRight}},[_vm._v(\"丢弃标签\")])]),_c('div',{staticClass:\"upload-group\"},[_c('label',[_vm._v(\"纤维文件(.tck)\")]),_c('input',{ref:\"tckInputRight\",staticClass:\"inputFileLabel\",attrs:{\"type\":\"file\",\"accept\":\".tck\",\"multiple\":\"\"},on:{\"change\":_vm.handleTCKUploadRight}}),_c('button',{attrs:{\"disabled\":!_vm.hasFibersRight},on:{\"click\":_vm.clearFibersRight}},[_vm._v(\"清空纤维\")])])])])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import * as THREE from 'three';\r\n\r\n/**\r\n * 创建并配置场景的光照系统\r\n * @param {THREE.Scene} scene - Three.js场景对象\r\n * @returns {Object} 包含所有光源的对象，方便后续管理\r\n */\r\nexport function setupLights(scene) {\r\n    // 环境光\r\n    const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);\r\n    scene.add(ambientLight);\r\n    \r\n    // 方向光配置\r\n    const directionalLights = [\r\n        { position: [1, 1, 1], intensity: 0.5 },\r\n        { position: [-1, -1, -1], intensity: 0.5 },\r\n        { position: [0, 1, -1], intensity: 0.5 },\r\n        { position: [0, -1, 1], intensity: 0.5 }\r\n    ];\r\n\r\n    // 创建并添加方向光\r\n    const lights = directionalLights.map((config) => {\r\n        const light = new THREE.DirectionalLight(0xffffff, config.intensity);\r\n        light.position.set(...config.position);\r\n        scene.add(light);\r\n        return light;\r\n    });\r\n\r\n    return {\r\n        ambientLight,\r\n        directionalLights: lights\r\n    };\r\n} ","import * as THREE from 'three';\r\n\r\n/**\r\n * 创建默认材质\r\n * @param {Object} options - 材质配置选项\r\n * @returns {THREE.MeshPhongMaterial} 创建的材质对象\r\n */\r\nexport function createDefaultMaterial(options = {}) {\r\n    const {\r\n        opacity = 1,\r\n        vertexColors = false,\r\n        shininess = 5,\r\n        specular = new THREE.Color(0x111111)\r\n    } = options;\r\n\r\n    return new THREE.MeshPhongMaterial({\r\n        color: new THREE.Color(0x808080),\r\n        side: THREE.DoubleSide,\r\n        opacity,\r\n        transparent: opacity < 1,\r\n        vertexColors,\r\n        shininess,\r\n        specular\r\n    });\r\n}\r\n\r\n/**\r\n * 更新材质属性\r\n * @param {THREE.Material} material - 要更新的材质\r\n * @param {Object} options - 要更新的属性\r\n */\r\nexport function updateMaterial(material, options = {}) {\r\n    Object.entries(options).forEach(([key, value]) => {\r\n        if (material[key] !== undefined) {\r\n            material[key] = value;\r\n        }\r\n    });\r\n    material.needsUpdate = true;\r\n} \r\n\r\n// 假设 tracts 是一个数组，\r\n// 每个 tract 又是 [[x,y,z], [x,y,z], …] 形式的点列表\r\nexport function buildFiberLines(fibers) {\r\n    const group = new THREE.Group();\r\n    \r\n    // 计算所有纤维的中心点\r\n    const center = new THREE.Vector3();\r\n    let totalPoints = 0;\r\n    \r\n    fibers.forEach(fiber => {\r\n        for (let i = 0; i < fiber.length; i += 3) {\r\n            center.x += fiber[i];\r\n            center.y += fiber[i + 1];\r\n            center.z += fiber[i + 2];\r\n            totalPoints++;\r\n        }\r\n    });\r\n    \r\n    center.divideScalar(totalPoints);\r\n    \r\n    // 创建RGB颜色\r\n    const rgbColor = new THREE.Color(center.x, center.y, center.z);\r\n    \r\n    // 获取HSL值\r\n    const hsl = {};\r\n    rgbColor.getHSL(hsl);\r\n    \r\n    // 使用HSL值作为基础颜色\r\n    const baseColor = {\r\n        h: hsl.h,\r\n        s: 0.8,           // 固定饱和度\r\n        l: 0.6            // 固定亮度\r\n    };\r\n    \r\n    // 给每条纤维一个材料（可改成不同颜色或材质）\r\n    const baseMaterial = new THREE.LineBasicMaterial({ linewidth: 1 });\r\n    \r\n    fibers.forEach((fiber) => {\r\n        const geometry = new THREE.BufferGeometry();\r\n        const positions = new Float32Array(fiber.flat());\r\n        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\r\n        \r\n        // 在基础颜色周围进行小范围随机变化\r\n        const hueVariation = (Math.random() - 0.5) * 0.1; // ±0.05的色相变化\r\n        const saturationVariation = (Math.random() - 0.5) * 0.1; // ±0.05的饱和度变化\r\n        const lightnessVariation = (Math.random() - 0.5) * 0.1; // ±0.05的亮度变化\r\n        \r\n        const color = new THREE.Color().setHSL(\r\n            (baseColor.h + hueVariation) % 1,\r\n            Math.max(0, Math.min(1, baseColor.s + saturationVariation)),\r\n            Math.max(0, Math.min(1, baseColor.l + lightnessVariation))\r\n        );\r\n        \r\n        const material = baseMaterial.clone();\r\n        material.color.copy(color);\r\n        \r\n        const line = new THREE.Line(geometry, material);\r\n        group.add(line);\r\n    });\r\n    \r\n    return group;\r\n}","import * as THREE from 'three';\r\n\r\n/**\r\n * 对顶点坐标进行旋转\r\n * @param {Float32Array} pointsArray - 顶点坐标数组\r\n * @param {Object} options - 旋转选项\r\n * @param {number} [options.rotateX=0] - 绕X轴旋转的角度（弧度）\r\n * @param {number} [options.rotateY=0] - 绕Y轴旋转的角度（弧度）\r\n * @param {number} [options.rotateZ=0] - 绕Z轴旋转的角度（弧度）\r\n * @returns {Float32Array} 旋转后的顶点坐标数组\r\n */\r\nexport function rotatePoints(pointsArray, options = {}) {\r\n    const { rotateX = 0, rotateY = 0, rotateZ = 0 } = options;\r\n    \r\n    // 创建旋转矩阵\r\n    const rotationMatrix = new THREE.Matrix4();\r\n    rotationMatrix.makeRotationFromEuler(new THREE.Euler(rotateX, rotateY, rotateZ));\r\n    \r\n    // 创建临时向量\r\n    const vector = new THREE.Vector3();\r\n    \r\n    // 对每个顶点应用旋转\r\n    for (let i = 0; i < pointsArray.length; i += 3) {\r\n        vector.set(pointsArray[i], pointsArray[i + 1], pointsArray[i + 2]);\r\n        vector.applyMatrix4(rotationMatrix);\r\n        pointsArray[i] = vector.x;\r\n        pointsArray[i + 1] = vector.y;\r\n        pointsArray[i + 2] = vector.z;\r\n    }\r\n    \r\n    return pointsArray;\r\n}\r\n","import * as THREE from 'three';\r\nimport pako from 'pako';\r\nimport { rotatePoints } from './cordTrans';\r\n/**\r\n * 解码Base64编码的GZip数据\r\n * @param {string} base64String - Base64编码的字符串\r\n * @returns {ArrayBuffer} 解码后的数据\r\n */\r\nfunction decodeBase64Gzip(base64String) {\r\n    const cleanBase64 = base64String\r\n        .replace(/\\s/g, '')\r\n        .replace(/[^A-Za-z0-9+/=]/g, '');\r\n\r\n    const binaryString = atob(cleanBase64);\r\n    const bytes = new Uint8Array(binaryString.length);\r\n    for (let i = 0; i < binaryString.length; i++) {\r\n        bytes[i] = binaryString.charCodeAt(i);\r\n    }\r\n\r\n    return pako.inflate(bytes).buffer;\r\n}\r\n\r\n/**\r\n * 解析GIFTI文件内容\r\n * @param {string} content - GIFTI文件的XML内容\r\n * @param {Object} [options] - 解析选项\r\n * @param {Object} [options.rotation] - 旋转选项\r\n * @param {number} [options.rotation.rotateX=0] - 绕X轴旋转的角度（弧度）\r\n * @param {number} [options.rotation.rotateY=0] - 绕Y轴旋转的角度（弧度）\r\n * @param {number} [options.rotation.rotateZ=0] - 绕Z轴旋转的角度（弧度）\r\n * @returns {Promise<THREE.BufferGeometry>} 解析后的几何体\r\n */\r\nexport async function parseGIFTI(content, options = {}) {\r\n    const parser = new DOMParser();\r\n    const xmlDoc = parser.parseFromString(content, \"text/xml\");\r\n    \r\n    const dataArrays = xmlDoc.getElementsByTagName('DataArray');\r\n    let pointsData = null;\r\n    let facesData = null;\r\n\r\n    for (let i = 0; i < dataArrays.length; i++) {\r\n        const dataArray = dataArrays[i];\r\n        const intent = dataArray.getAttribute('Intent');\r\n        const base64Data = dataArray.querySelector('Data')?.textContent;\r\n\r\n        if (intent === 'NIFTI_INTENT_POINTSET' && base64Data) {\r\n            pointsData = base64Data.trim();\r\n        } else if (intent === 'NIFTI_INTENT_TRIANGLE' && base64Data) {\r\n            facesData = base64Data.trim();\r\n        }\r\n    }\r\n\r\n    if (!pointsData || !facesData) {\r\n        throw new Error('无法找到顶点或面数据');\r\n    }\r\n\r\n    const pointsBuffer = await decodeBase64Gzip(pointsData);\r\n    const facesBuffer = await decodeBase64Gzip(facesData);\r\n    \r\n    let pointsArray = new Float32Array(pointsBuffer);\r\n    const facesArray = new Uint32Array(facesBuffer);\r\n\r\n    // 应用旋转（如果提供了旋转选项）\r\n    if (options.rotation) {\r\n        pointsArray = rotatePoints(pointsArray, options.rotation);\r\n    }\r\n\r\n    // 确保面的顶点顺序正确（逆时针）\r\n    for (let i = 0; i < facesArray.length; i += 3) {\r\n        const temp = facesArray[i + 1];\r\n        facesArray[i + 1] = facesArray[i + 2];\r\n        facesArray[i + 2] = temp;\r\n    }\r\n\r\n    const geometry = new THREE.BufferGeometry();\r\n    geometry.setAttribute('position', new THREE.BufferAttribute(pointsArray, 3));\r\n    geometry.setIndex(new THREE.BufferAttribute(facesArray, 1));\r\n    geometry.computeVertexNormals();\r\n    geometry.computeBoundingBox();\r\n    geometry.computeBoundingSphere();\r\n\r\n    return geometry;\r\n}\r\n\r\n/**\r\n * 解析标签文件内容\r\n * @param {string} content - 标签文件的XML内容\r\n * @returns {Promise<Int32Array>} 解析后的标签数据\r\n */\r\nexport async function parseLabelGIFTI(content) {\r\n    const parser = new DOMParser();\r\n    const xmlDoc = parser.parseFromString(content, \"text/xml\");\r\n    \r\n    const dataArray = xmlDoc.querySelector('DataArray');\r\n    if (!dataArray) {\r\n        throw new Error('未找到数据数组');\r\n    }\r\n\r\n    const base64Data = dataArray.querySelector('Data')?.textContent;\r\n    if (!base64Data) {\r\n        throw new Error('未找到标签数据');\r\n    }\r\n\r\n    const labelBuffer = await decodeBase64Gzip(base64Data);\r\n    return new Int32Array(labelBuffer);\r\n} ","import * as THREE from 'three';\r\n\r\n/**\r\n * 生成均匀分布的颜色\r\n * @param {number} count - 需要生成的颜色数量\r\n * @returns {Object} 颜色映射对象，key为索引，value为THREE.Color对象\r\n */\r\nexport function generateColors(count) {\r\n    const colors = {};\r\n    for (let i = 0; i < count; i++) {\r\n        const hue = (i / count) * 360;\r\n        const saturation = 0.8;\r\n        const value = 0.9;\r\n        \r\n        const h = hue / 60;\r\n        const c = value * saturation;\r\n        const x = c * (1 - Math.abs((h % 2) - 1));\r\n        const m = value - c;\r\n        \r\n        let r, g, b;\r\n        if (h < 1) { [r, g, b] = [c, x, 0]; }\r\n        else if (h < 2) { [r, g, b] = [x, c, 0]; }\r\n        else if (h < 3) { [r, g, b] = [0, c, x]; }\r\n        else if (h < 4) { [r, g, b] = [0, x, c]; }\r\n        else if (h < 5) { [r, g, b] = [x, 0, c]; }\r\n        else { [r, g, b] = [c, 0, x]; }\r\n        \r\n        colors[i] = new THREE.Color(\r\n            (r + m),\r\n            (g + m),\r\n            (b + m)\r\n        );\r\n    }\r\n    return colors;\r\n}\r\n\r\n/**\r\n * 更新几何体的顶点颜色\r\n * @param {THREE.BufferGeometry} geometry - 要更新的几何体\r\n * @param {Int32Array} labels - 顶点标签数据\r\n * @param {Object} labelColors - 标签到颜色的映射,labelsColors可以为空\r\n */\r\nexport function updateVertexColors(geometry, labels, labelColors) {\r\n    const vertexCount = geometry.attributes.position.count;\r\n    const colors = new Float32Array(vertexCount * 3);\r\n    const defaultColor = new THREE.Color(0x808080);\r\n\r\n    for (let i = 0; i < vertexCount; i++) {\r\n        let color = defaultColor;\r\n\r\n        if (labels && labels.length === vertexCount) {\r\n            const label = labels[i].toString();\r\n            color = label === \"0\" ? defaultColor : labelColors[label] || defaultColor;\r\n        }\r\n\r\n        colors[i * 3] = color.r;\r\n        colors[i * 3 + 1] = color.g;\r\n        colors[i * 3 + 2] = color.b;\r\n    }\r\n\r\n    geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));\r\n    geometry.attributes.color.needsUpdate = true;\r\n}","import * as THREE from 'three';\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\r\n\r\n/**\r\n * 创建并配置相机\r\n * @param {number} width - 视口宽度\r\n * @param {number} height - 视口高度\r\n * @returns {THREE.PerspectiveCamera} 配置好的相机对象\r\n */\r\nexport function createCamera(width, height) {\r\n    const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);\r\n    camera.position.z = 10;\r\n    return camera;\r\n}\r\n\r\n/**\r\n * 创建并配置轨道控制器\r\n * @param {THREE.PerspectiveCamera} camera - 相机对象\r\n * @param {HTMLElement} domElement - 控制器绑定的DOM元素\r\n * @returns {OrbitControls} 配置好的控制器对象\r\n */\r\nexport function createControls(camera, domElement) {\r\n    const controls = new OrbitControls(camera, domElement);\r\n    controls.enableDamping = true;\r\n    controls.dampingFactor = 0.1;\r\n    controls.minDistance = 1;\r\n    controls.maxDistance = 200;\r\n    controls.rotateSpeed = 0.3;\r\n    controls.zoomSpeed = 0.5;\r\n    controls.panSpeed = 0.3;\r\n    return controls;\r\n}\r\n\r\n/**\r\n * 调整相机位置以适应模型\r\n * @param {THREE.PerspectiveCamera} camera - 相机对象\r\n * @param {THREE.Object3D} object - 要适应的模型对象\r\n * @param {OrbitControls} controls - 轨道控制器对象\r\n */\r\nexport function adjustCameraToObject(camera, object) {\r\n    const box = new THREE.Box3().setFromObject(object);\r\n    const center = box.getCenter(new THREE.Vector3());\r\n    const size = box.getSize(new THREE.Vector3());\r\n    const maxDim = Math.max(size.x, size.y, size.z);\r\n    const fov = camera.fov * (Math.PI / 180);\r\n    let cameraZ = Math.abs(maxDim / Math.tan(fov / 2));\r\n    camera.position.z = cameraZ * 3;\r\n    camera.lookAt(center);\r\n\r\n}\r\n","import { rotatePoints } from './cordTrans';\r\n\r\n/**\r\n * 解析.tck文件内容\r\n * @param {ArrayBuffer} buffer - .tck文件的二进制数据\r\n * @returns {Promise<THREE.BufferGeometry>} 解析后的几何体\r\n */\r\nexport async function parseTCK(buffer, options = {}) {\r\n    const dataView = new DataView(buffer);\r\n    const decoder = new TextDecoder('utf-8');\r\n    const uint8Array = new Uint8Array(buffer);\r\n\r\n    // 1. 提取header\r\n    let headerText = '';\r\n    let headerEnd = 0;\r\n    for (let i = 0; i < uint8Array.length - 2; i++) {\r\n        const slice = decoder.decode(uint8Array.slice(i, i + 3));\r\n        if (slice === 'END') {\r\n            headerEnd = i + 3; // END结束\r\n            break;\r\n        }\r\n    }\r\n    if (headerEnd === 0) {\r\n        throw new Error('Header解析失败，未找到END');\r\n    }\r\n    headerText = decoder.decode(uint8Array.slice(0, headerEnd));\r\n    const headerLines = headerText.split('\\n');\r\n\r\n    // 2. 解析header为字典\r\n    const header = {};\r\n    const commandHistory = [];\r\n    for (const line of headerLines) {\r\n        if (line === 'END') break;\r\n        if (line.startsWith('mrtrix tracks')) {\r\n            header['first_line'] = 'mrtrix tracks';\r\n        } else if (line.startsWith('command_history:')) {\r\n            commandHistory.push(line.split(':')[1].trim());\r\n        } else if (line.includes(':')) {\r\n            const [key, value] = line.split(':');\r\n            header[key.trim()] = value.trim();\r\n        }\r\n    }\r\n    header['command_history'] = commandHistory;\r\n\r\n    // 3. 确定数据开始offset\r\n    let fileOffset = 0;\r\n    if (header['file']) {\r\n        const match = header['file'].match(/\\d+/);\r\n        if (match) {\r\n            fileOffset = parseInt(match[0]);\r\n        }\r\n    }\r\n\r\n    // 4. 确定数据格式\r\n    const isLittleEndian = header['datatype'].includes('LE');\r\n    const isFloat32 = header['datatype'].includes('32');\r\n    const bytesPerFloat = isFloat32 ? 4 : 8;\r\n    const floatReader = isFloat32\r\n        ? (offset) => dataView.getFloat32(offset, isLittleEndian)\r\n        : (offset) => dataView.getFloat64(offset, isLittleEndian);\r\n\r\n    // 5. 读取fiber数据\r\n    let offset = fileOffset;\r\n    const tracts = [];\r\n    let currentTract = [];\r\n    let nanCount = 0;\r\n    let infCount = 0;\r\n    let done = false;\r\n\r\n    // 读取count指定的轨迹数量\r\n    const numTracts = parseInt(header['count']);\r\n    console.log('预期轨迹数量:', numTracts);\r\n    \r\n    while (!done && offset + bytesPerFloat <= buffer.byteLength && tracts.length < numTracts) {\r\n        const x = floatReader(offset);\r\n        const y = floatReader(offset + bytesPerFloat);\r\n        const z = floatReader(offset + bytesPerFloat * 2);\r\n        offset += bytesPerFloat * 3;\r\n\r\n        if (Number.isNaN(x) || Number.isNaN(y) || Number.isNaN(z)) {\r\n            nanCount++;\r\n            if (nanCount === 1) {\r\n                // 当前fiber结束\r\n                if (currentTract.length > 0) {\r\n                    // 应用旋转（如果提供了旋转选项）\r\n                    if (options.rotation) {\r\n                        currentTract = rotatePoints(currentTract, options.rotation);\r\n                    }\r\n                    tracts.push(currentTract);\r\n                    currentTract = [];\r\n                }\r\n                nanCount = 0;\r\n            }\r\n        } else if (x === Infinity || y === Infinity || z === Infinity) {\r\n            infCount++;\r\n            if (infCount === 1) {\r\n                done = true;\r\n            }\r\n        } else {\r\n            nanCount = 0;\r\n            currentTract.push(x, y, z);\r\n        }\r\n    }\r\n\r\n    // 添加最后一个轨迹（如果有的话）\r\n    if (currentTract.length > 0) {\r\n        tracts.push(currentTract);\r\n    }\r\n\r\n    console.log(`总共读取了 ${tracts.length} 条tract`);\r\n    return tracts;\r\n}","import { ref, onMounted, onBeforeUnmount } from 'vue';\nimport * as THREE from 'three';\nimport { setupLights } from '../../utils/lightManager';\nimport { createDefaultMaterial, updateMaterial, buildFiberLines } from '../../utils/materialManager';\nimport { parseGIFTI, parseLabelGIFTI } from '../../utils/giftiParser';\nimport { generateColors, updateVertexColors } from '../../utils/colorManager';\nimport { createCamera, createControls, adjustCameraToObject } from '../../utils/cameraManager';\nimport { parseTCK } from '../../utils/tckParser';\n\nexport function useThreeWorld(containerRef, sharedState, side) {\n  const opacity = ref(1);\n  const hasSurface = ref(false);\n  const hasLabels = ref(false);\n  const hasFibers = ref(false);\n  const viewMode = ref('browse'); // 'browse' 或 'inspect'\n  const surfaceCheckTag = ref(false);\n  const selectedVertex = ref(null);\n  const vertexInfo = ref(null);\n  const surfInput = ref(null);\n  const labelInput = ref(null);\n  const tckInput = ref(null);\n  const surfSysFiles = ref([]);\n  \n  let scene = null;\n  let camera = null;\n  let renderer = null;\n  let controls = null;\n  let currentMesh = null;\n  let currentTracks = [];\n  let vertexLabels = null;\n  let labelColors = {};\n  let needsRender = true;\n  let raycaster = null;\n  let mouse = null;\n  let highlightMaterial = null;\n  let highlightMesh = null;\n  let chooseLabel = null;\n\n  /**\n   * 初始化Three.js场景\n   */\n  const initThree = () => {\n    if (!containerRef.value) return;\n\n    // 创建场景\n    scene = new THREE.Scene();\n    scene.background = new THREE.Color(0x2c2c2c);\n\n    // 创建相机和控制器\n    const container = containerRef.value;\n    const width = container.clientWidth;\n    const height = container.clientHeight;\n    \n    camera = createCamera(width, height);\n    renderer = new THREE.WebGLRenderer({\n      antialias: true,\n      alpha: false,\n      depth: true,\n      stencil: false,\n      preserveDrawingBuffer: false,\n      powerPreference: \"high-performance\"\n    });\n    \n    renderer.setSize(width, height);\n    renderer.setClearColor(0x2c2c2c, 1);\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n    container.appendChild(renderer.domElement);\n\n    controls = createControls(camera, renderer.domElement);\n    \n    // 设置光照\n    setupLights(scene);\n\n    // 初始化射线检测器和鼠标位置\n    raycaster = new THREE.Raycaster();\n    mouse = new THREE.Vector2();\n\n    // 添加鼠标点击事件监听\n    renderer.domElement.addEventListener('click', onMouseClick);\n\n    // 开始动画循环\n    animate();\n  };\n\n  /**\n   * 动画循环\n   */\n  const animate = () => {\n    if (!renderer || !scene || !camera) return;\n    requestAnimationFrame(animate);\n    if (controls && controls.enabled && (controls.update() || needsRender)) {\n      renderer.render(scene, camera);\n      needsRender = false;\n    }\n  };\n\n  /**\n   * 处理鼠标点击皮层事件\n   */\n  const onMouseClick = (event) => {\n    if (!renderer || !camera || !currentMesh || (viewMode.value !== 'inspect' && !surfaceCheckTag.value) ) return;\n\n    // 计算鼠标在归一化设备坐标中的位置\n    const rect = renderer.domElement.getBoundingClientRect();\n    mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;\n    mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n\n    // 更新射线\n    raycaster.setFromCamera(mouse, camera);\n\n    // 检测射线与模型的交点\n    const intersects = raycaster.intersectObject(currentMesh);\n\n    if (intersects.length > 0) {\n      const intersect = intersects[0];\n      const vertexIndex = intersect.face.a;\n      \n      // 获取顶点位置\n      const position = currentMesh.geometry.attributes.position;\n      const vertexPosition = new THREE.Vector3(\n        position.getX(vertexIndex),\n        position.getY(vertexIndex),\n        position.getZ(vertexIndex)\n      );\n\n      // 高亮选中的顶点\n      highlightVertex(vertexPosition);\n\n      // 获取顶点信息\n      selectedVertex.value = vertexIndex;\n      vertexInfo.value = {\n        index: vertexIndex,\n        position: {\n          x: vertexPosition.x.toFixed(2),\n          y: vertexPosition.y.toFixed(2),\n          z: vertexPosition.z.toFixed(2)\n        }\n      };\n\n      // 如果有标签，添加标签信息\n      if (hasLabels.value && vertexLabels) {\n        const label = vertexLabels[vertexIndex];\n        vertexInfo.value.label = label;\n        chooseLabel = label;\n        if (labelColors[label.toString()]) {\n          const color = labelColors[label.toString()];\n          vertexInfo.value.color = {\n            r: color.r.toFixed(2),\n            g: color.g.toFixed(2),\n            b: color.b.toFixed(2)\n          };\n        }\n      }\n      \n      // 如果是皮层检查功能则需要进行标签选择\n      if(surfaceCheckTag && viewMode.value !== 'inspect') {\n        // 将所选标签保留 ，其他标签置为0\n        flushChooseLabelOnSurf(chooseLabel);\n        // 找到另一个画布对应的label\n        const otherSide = side === 'left' ? 'right' : 'left';\n        const otherWorld = sharedState[otherSide];\n        otherWorld.flushChooseLabelOnSurf(chooseLabel);\n      }\n      needsRender = true;\n\n    } else {\n      // 如果没有选中任何顶点，清除高亮和信息\n      clearHighlight();\n      selectedVertex.value = null;\n      vertexInfo.value = null;\n      needsRender = true;\n    }\n  };\n\n  /**\n   * 用来一个画布对另一个画布的刷新函数，用于皮层检查，只显示皮层中选中的一个颜色\n   */\n  const flushChooseLabelOnSurf = (cho_label) => {\n    if(vertexLabels && labelColors) {\n      const filteredLabels = vertexLabels.map(label => label === cho_label ? label : 0);\n      updateVertexColors(currentMesh.geometry, filteredLabels, labelColors);\n    }\n    needsRender = true;\n  }\n\n\n  /**\n   * 用来重新刷新皮层标签，重新填充全脑标签\n   */\n  const refreshSurfaceLabel = () => {\n    if (hasLabels.value && vertexLabels) {\n      // 恢复原标签\n      updateVertexColors(currentMesh.geometry, vertexLabels, labelColors);\n      // 清除高亮点\n      clearHighlight();\n      selectedVertex.value = null;\n      vertexInfo.value = null;\n    }\n    needsRender = true;\n  }\n\n  /**\n   * 高亮选中的顶点\n   */\n  const highlightVertex = (position) => {\n    // 清除之前的高亮\n    clearHighlight();\n\n    // 创建一个非常大的球体，确保可见\n    const high_geometry = new THREE.SphereGeometry(2, 32, 32);\n    \n    highlightMaterial = new THREE.MeshPhongMaterial({\n      color: 0xdddddd,\n      transparent: true,\n      depthTest: false, // 禁用深度测试，确保始终显示在最前面\n      depthWrite: false\n    });\n    \n    highlightMesh = new THREE.Mesh(high_geometry, highlightMaterial);\n    highlightMesh.position.copy(position);\n    \n    // 将高亮对象添加到场景\n    scene.add(highlightMesh);\n    \n    // 强制立即渲染\n    renderer.render(scene, camera);\n    needsRender = true;\n  };\n\n  /**\n   * 清除高亮\n   */\n  const clearHighlight = () => {\n    if (highlightMesh) {\n      scene.remove(highlightMesh);\n      highlightMesh.geometry.dispose();\n      highlightMaterial.dispose();\n      highlightMesh = null;\n      needsRender = true;\n    }\n  };\n\n  /**\n   * 切换查看模式\n   */\n  const toggleViewMode = () => {\n    surfaceCheckTag.value = false;\n    \n    refreshSurfaceLabel();\n    \n    viewMode.value = viewMode.value === 'browse' ? 'inspect' : 'browse';\n    \n    needsRender = true;\n  };\n\n  /**\n   * 进行皮层检查\n   */\n  const surfaceCheck = () => {\n    // 要对检查模式进行关闭，进入普通的浏览模式，并且对于两个画布都是如此\n    if(viewMode.value === 'inspect') {\n      toggleViewMode();\n    }\n\n    if(surfaceCheckTag.value) {\n      surfaceCheckTag.value = false;\n    } else {\n      surfaceCheckTag.value = true;\n    }\n    refreshSurfaceLabel();\n    // 刷新另一个\n    const otherSide = side === 'left' ? 'right' : 'left';\n    const otherWorld = sharedState[otherSide];\n    \n    otherWorld.refreshSurfaceLabel();\n    needsRender = true;\n  }\n\n  /**\n   * 处理表面文件上传\n   */\n  const handleSurfaceUpload = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      loadGIFTIFile(file);\n    }\n  };\n\n  /**\n   * 加载GIFTI文件\n   */\n  const loadGIFTIFile = async (file) => {\n    const fileReader = new FileReader();\n    fileReader.onload = async (event) => {\n      try {\n        // 设置旋转选项，绕X轴逆时针旋转90度，绕Y轴顺时针旋转90度\n        const rotationOptions = {\n          rotation: {\n            rotateX: -Math.PI / 2, // 绕X轴逆时针旋转90度\n            rotateY: 0,  // 绕Y轴顺时针旋转90度\n            rotateZ: Math.PI / 2  // 绕Z轴\n          }\n        };\n        \n        const geometry = await parseGIFTI(event.target.result, rotationOptions);\n        const material = createDefaultMaterial({\n          opacity: opacity.value,\n          transparent: opacity.value < 1\n        });\n        \n        const mesh = new THREE.Mesh(geometry, material);\n        \n        if (currentMesh) {\n          scene.remove(currentMesh);\n          currentMesh.geometry.dispose();\n          currentMesh.material.dispose();\n        }\n\n        currentMesh = mesh;\n        scene.add(mesh);\n        hasSurface.value = true;\n        adjustCameraToObject(camera, mesh);\n        needsRender = true;\n      } catch (error) {\n        console.error('加载GIFTI文件时出错:', error);\n      }\n    };\n    fileReader.readAsText(file);\n  };\n\n  /**\n   * 处理标签文件上传\n   */\n  const handleLabelUpload = async (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      const fileReader = new FileReader();\n      fileReader.onload = async (event) => {\n        try {\n          vertexLabels = await parseLabelGIFTI(event.target.result);\n          const uniqueLabels = new Set(vertexLabels);\n          const sortedLabels = Array.from(uniqueLabels).sort((a, b) => a - b);\n          const colors = generateColors(sortedLabels.length);\n          \n          labelColors = {};\n          sortedLabels.forEach((label, index) => {\n            labelColors[label.toString()] = colors[index];\n          });\n\n          hasLabels.value = true;\n          updateVertexColors(currentMesh.geometry, vertexLabels, labelColors);\n          currentMesh.material.vertexColors = true;\n          currentMesh.material.needsUpdate = true;\n          needsRender = true;\n        } catch (error) {\n          console.error('处理标签文件时出错:', error);\n        }\n      };\n      fileReader.readAsText(file);\n    }\n  };\n\n  /**\n   * 处理.tck文件上传\n   */\n  const handleTCKUpload = async (event) => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n\n    try {\n      // 处理每个文件    \n      const files = Array.from(event.target.files);\n      if (files.length > 0) {\n        for (const file of files) {\n          const buffer = await file.arrayBuffer();\n          console.log(`处理文件: ${file.name}`);\n          // 设置旋转选项，绕X轴逆时针旋转90度，绕Y轴顺时针旋转90度\n          const rotationOptions = {\n            rotation: {\n              rotateX: -Math.PI / 2, // 绕X轴逆时针旋转90度\n              rotateY: 0,  // 绕Y轴顺时针旋转90度\n              rotateZ: Math.PI / 2  // 绕Z轴\n            }\n          };\n\n          const fibers = await parseTCK(buffer, rotationOptions);\n          const fiberGroup = buildFiberLines(fibers);\n          // 把 Group 加入场景\n          currentTracks.push(fiberGroup);\n          scene.add(fiberGroup);\n          needsRender = true;\n        }\n\n        hasFibers.value = true;\n        \n        // 调整相机位置以适应模型\n        if (currentMesh) {\n          adjustCameraToObject(camera, currentMesh);\n        } else if (currentTracks.length > 0) {\n          // 如果有纤维，调整相机以适应所有纤维\n          // const group = new THREE.Group();\n          // currentTracks.forEach(track => group.add(track));\n          adjustCameraToObject(camera, currentTracks[0]);\n        }\n        needsRender = true;\n      }\n    } \n    catch (error) {\n      console.error('加载.tck文件时出错:', error);\n    }\n  };\n\n  /**\n   * 丢弃皮层\n   */\n  const discardSurface = () => {\n    if (currentMesh && hasSurface.value) {\n      \n      // 清除皮层\n      scene.remove(currentMesh);\n      currentMesh.geometry.dispose();\n      currentMesh.material.dispose();\n      hasSurface.value = false;\n      \n      // 清除标签数据\n      if(hasLabels.value) {\n        vertexLabels = null;\n        labelColors = {};\n        hasLabels.value = false;\n      }\n  \n      // 清除顶点信息\n      if (viewMode.value === 'inspect') {\n        clearHighlight();\n        selectedVertex.value = null;\n        vertexInfo.value = null;\n      }\n      needsRender = true;\n      // 清空文件输入\n      if (surfInput.value) surfInput.value.value = '';\n      if (labelInput.value) labelInput.value.value = '';\n    }\n  };\n\n\n  /**\n   * 丢弃标签\n   */\n  const discardLabels = () => {\n    if (currentMesh && hasLabels.value) {\n      const geometry = currentMesh.geometry;\n  \n      // 删除顶点颜色属性\n      if (geometry.getAttribute('color')) {\n        geometry.deleteAttribute('color');\n        geometry.attributes.position.needsUpdate = true; // 通常也加上以确保渲染更新\n      }\n  \n      // 重置材质为统一灰色\n      const material = currentMesh.material;\n      material.vertexColors = false; // 告诉材质不再使用每个顶点的颜色\n      material.color.set(0x808080);\n      material.needsUpdate = true;\n  \n      // 清除标签数据\n      vertexLabels = null;\n      labelColors = {};\n      hasLabels.value = false;\n  \n      // 清除顶点信息\n      if (viewMode.value === 'inspect') {\n        clearHighlight();\n        selectedVertex.value = null;\n        vertexInfo.value = null;\n      }\n\n      needsRender = true;\n      // 清空文件输入\n      if (labelInput.value) labelInput.value.value = '';\n    }\n  };\n\n  /**\n   * 清空纤维\n   */\n  const clearFibers = () => {\n    if (!currentTracks || !scene) return;\n\n    // 从场景中移除所有纤维并释放资源\n    currentTracks.forEach(track => {\n      if (!track) return;\n\n      if (track.children) {\n        // 如果是Group，遍历其所有子对象\n        track.children.forEach(child => {\n          if (child && scene) {\n            scene.remove(child);\n            if (child.geometry) child.geometry.dispose();\n            if (child.material) child.material.dispose();\n          }\n        });\n        scene.remove(track);\n      } else {\n        // 如果是单个Line对象\n        scene.remove(track);\n        if (track.geometry) track.geometry.dispose();\n        if (track.material) track.material.dispose();\n      }\n    });\n    \n    // 清空数组\n    currentTracks = [];\n    hasFibers.value = false;\n    \n    // 触发重新渲染\n    needsRender = true;\n    // 清空文件输入\n    if (tckInput.value) tckInput.value.value = '';\n  };\n\n  /**\n   * 重置视图\n   */\n  const resetView = () => {\n    if (currentMesh) {\n      adjustCameraToObject(camera, currentMesh, controls);\n    }\n    needsRender = true;\n  };\n\n  /**\n   * 更新透明度\n   */\n  const updateOpacity = () => {\n    if (currentMesh) {\n      updateMaterial(currentMesh.material, {\n        opacity: opacity.value,\n        transparent: opacity.value < 1\n      });\n      needsRender = true;\n    }\n  };\n\n  /**\n   * 处理窗口大小变化\n   */\n  const handleResize = () => {\n    if (!containerRef.value || !renderer || !camera) return;\n    \n    const container = containerRef.value;\n    const width = container.clientWidth;\n    const height = container.clientHeight;\n    camera.aspect = width / height;\n    camera.updateProjectionMatrix();\n    renderer.setSize(width, height);\n    needsRender = true;\n  };\n\n  onMounted(() => {\n    initThree();\n    window.addEventListener('resize', handleResize);\n    \n    // 加载系统中assets下的surface, parcellation, tck\n    // 获取 ./src/assets/ 下的所有文件名\n    // const surfSysNames = require.context('@/assets/surfaces', false, /\\.gii$/);\n    // console.log(surfSysNames);\n    // // surfSysFiles.value = surfSysNames.keys().map((key) => key.split(\"/\").pop());\n    \n  });\n\n  onBeforeUnmount(() => {\n    window.removeEventListener('resize', handleResize);\n    if (renderer) {\n      renderer.domElement.removeEventListener('click', onMouseClick);\n      renderer.dispose();\n    }\n    if (currentMesh) {\n      currentMesh.geometry.dispose();\n      currentMesh.material.dispose();\n    }\n    scene = null;\n    camera = null;\n    renderer = null;\n    controls = null;\n    currentMesh = null;\n    currentTracks = [];\n    vertexLabels = null;\n    labelColors = {};\n    raycaster = null;\n    mouse = null;\n    highlightMaterial = null;\n    highlightMesh = null;\n  });\n\n  return {\n    opacity,\n    hasSurface,\n    hasLabels,\n    hasFibers,\n    surfInput,\n    labelInput,\n    tckInput,\n    viewMode,\n    surfaceCheckTag,\n    vertexInfo,\n    currentMesh,\n    vertexLabels,\n    labelColors,\n    surfSysFiles,\n    handleSurfaceUpload,\n    handleLabelUpload,\n    handleTCKUpload,\n    discardSurface,\n    discardLabels,\n    clearFibers,\n    resetView,\n    updateOpacity,\n    toggleViewMode,\n    surfaceCheck,\n    refreshSurfaceLabel,\n    flushChooseLabelOnSurf\n  };\n} ","<template>\r\n  <div class=\"three-world\">\r\n    <h1>{{ msg }}</h1>\r\n    <div class=\"canvas-container\">\r\n      <!-- 左侧画布 -->\r\n      <div class=\"canvas-section\">\r\n        <div id=\"three-container-left\" ref=\"threeContainerLeft\" class=\"three-container\"></div>\r\n        <div class=\"control-panel\">\r\n          <div class=\"view-controls\">\r\n            <div class=\"control-group\">\r\n              <button @click=\"resetViewLeft\">重置视图</button>\r\n              <button @click=\"toggleViewModeLeft\" :class=\"{ active: viewModeLeft === 'inspect' }\">\r\n                {{ viewModeLeft === 'browse' ? '检查模式' : '浏览模式' }}\r\n              </button>\r\n              <button @click=\"surfaceCheckLeft\" :disabled=\"!(hasSurfaceLeft && hasLabelsLeft)\" :class=\"{ active: surfaceCheckTagLeft }\">\r\n                {{ surfaceCheckTagLeft ? '取消' : '皮层检查' }}\r\n              </button>\r\n            </div>\r\n            <div class=\"opacity-control\">\r\n              <label>皮层透明度</label>\r\n              <input type=\"range\" v-model=\"opacityLeft\" min=\"0\" max=\"1\" step=\"0.01\" @input=\"updateOpacityLeft\">\r\n            </div>\r\n            <div v-if=\"viewModeLeft === 'inspect' && vertexInfoLeft\" class=\"vertex-info\">\r\n              <h3>顶点信息</h3>\r\n              <p>索引: {{ vertexInfoLeft.index }}</p>\r\n              <p>位置: X: {{ vertexInfoLeft.position.x }}, Y: {{ vertexInfoLeft.position.y }}, Z: {{ vertexInfoLeft.position.z }}</p>\r\n              <p v-if=\"vertexInfoLeft.label !== undefined\">标签: {{ vertexInfoLeft.label }}</p>\r\n              <p v-if=\"vertexInfoLeft.color\">颜色: R: {{ vertexInfoLeft.color.r }}, G: {{ vertexInfoLeft.color.g }}, B: {{ vertexInfoLeft.color.b }}</p>\r\n            </div>\r\n            <div v-if=\"surfaceCheckTagLeft && vertexInfoLeft\" class=\"vertex-info\">\r\n              <h3>顶点信息</h3>\r\n              <p>索引: {{ vertexInfoLeft.index }}</p>\r\n              <p>位置: X: {{ vertexInfoLeft.position.x }}, Y: {{ vertexInfoLeft.position.y }}, Z: {{ vertexInfoLeft.position.z }}</p>\r\n              <p v-if=\"vertexInfoLeft.label !== undefined\">标签: {{ vertexInfoLeft.label }}</p>\r\n              <p v-if=\"vertexInfoLeft.color\">颜色: R: {{ vertexInfoLeft.color.r }}, G: {{ vertexInfoLeft.color.g }}, B: {{ vertexInfoLeft.color.b }}</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"file-upload\">\r\n            <div class=\"upload-group\">\r\n              <label>表面文件(.surf.gii)</label>\r\n              <!-- 下拉框 -->\r\n              <!-- v-model=\"selectedFile\" @change=\"loadFile\" -->\r\n              <select> \r\n                <option disabled value=\"\">请选择文件</option>\r\n                <option v-for=\"surf_sys_file in surfSysFiles\" :key=\"surf_sys_file\" :value=\"surf_sys_file\">\r\n                  {{ surf_sys_file }}\r\n                </option>\r\n              </select>\r\n              <input type=\"file\" @change=\"handleSurfaceUploadLeft\" accept=\".surf.gii\" class=\"inputFileLabel\" ref=\"surfInputLeft\"/>\r\n              <button @click=\"discardSurfaceLeft\" :disabled=\"!hasSurfaceLeft\">丢弃皮层</button>\r\n            </div>\r\n            <div class=\"upload-group\">\r\n              <label>标签文件(.label.gii)</label>\r\n              <input type=\"file\" @change=\"handleLabelUploadLeft\" accept=\".label.gii\" class=\"inputFileLabel\" ref=\"labelInputLeft\"/>\r\n              <button @click=\"discardLabelsLeft\" :disabled=\"!hasLabelsLeft\">丢弃标签</button>\r\n            </div>\r\n            <div class=\"upload-group\">\r\n              <label>纤维文件(.tck)</label>\r\n              <input type=\"file\" @change=\"handleTCKUploadLeft\" accept=\".tck\" multiple class=\"inputFileLabel\" ref=\"tckInputLeft\"/>\r\n              <button @click=\"clearFibersLeft\" :disabled=\"!hasFibersLeft\">清空纤维</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 右侧画布 -->\r\n      <div class=\"canvas-section\">\r\n        <div id=\"three-container-right\" ref=\"threeContainerRight\" class=\"three-container\"></div>\r\n        <div class=\"control-panel\">\r\n          <div class=\"view-controls\">\r\n            <div class=\"control-group\">\r\n              <button @click=\"resetViewRight\">重置视图</button>\r\n              <button @click=\"toggleViewModeRight\" :class=\"{ active: viewModeRight === 'inspect' }\">\r\n                {{ viewModeRight === 'browse' ? '检查模式' : '浏览模式' }}\r\n              </button>\r\n              <button @click=\"surfaceCheckRight\" :disabled=\"!(hasSurfaceRight && hasLabelsRight)\" :class=\"{ active: surfaceCheckTagRight }\">\r\n                {{ surfaceCheckTagRight ? '取消' : '皮层检查' }}\r\n              </button>\r\n            </div>\r\n            <div class=\"opacity-control\">\r\n              <label>皮层透明度</label>\r\n              <input type=\"range\" v-model=\"opacityRight\" min=\"0\" max=\"1\" step=\"0.01\" @input=\"updateOpacityRight\">\r\n            </div>\r\n            <div v-if=\"viewModeRight === 'inspect' && vertexInfoRight\" class=\"vertex-info\">\r\n              <h3>顶点信息</h3>\r\n              <p>索引: {{ vertexInfoRight.index }}</p>\r\n              <p>位置: X: {{ vertexInfoRight.position.x }}, Y: {{ vertexInfoRight.position.y }}, Z: {{ vertexInfoRight.position.z }}</p>\r\n              <p v-if=\"vertexInfoRight.label !== undefined\">标签: {{ vertexInfoRight.label }}</p>\r\n              <p v-if=\"vertexInfoRight.color\">颜色: R: {{ vertexInfoRight.color.r }}, G: {{ vertexInfoRight.color.g }}, B: {{ vertexInfoRight.color.b }}</p>\r\n            </div>\r\n            <div v-if=\"surfaceCheckTagRight && vertexInfoRight\" class=\"vertex-info\">\r\n              <h3>顶点信息</h3>\r\n              <p>索引: {{ vertexInfoRight.index }}</p>\r\n              <p>位置: X: {{ vertexInfoRight.position.x }}, Y: {{ vertexInfoRight.position.y }}, Z: {{ vertexInfoRight.position.z }}</p>\r\n              <p v-if=\"vertexInfoRight.label !== undefined\">标签: {{ vertexInfoRight.label }}</p>\r\n              <p v-if=\"vertexInfoRight.color\">颜色: R: {{ vertexInfoRight.color.r }}, G: {{ vertexInfoRight.color.g }}, B: {{ vertexInfoRight.color.b }}</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"file-upload\">\r\n            <div class=\"upload-group\">\r\n              <label>表面文件(.surf.gii)</label>\r\n              <input type=\"file\" @change=\"handleSurfaceUploadRight\" accept=\".surf.gii\" class=\"inputFileLabel\" ref=\"surfInputRight\"/>\r\n              <button @click=\"discardSurfaceRight\" :disabled=\"!hasSurfaceRight\">丢弃皮层</button>\r\n            </div>\r\n            <div class=\"upload-group\">\r\n              <label>标签文件(.label.gii)</label>\r\n              <input type=\"file\" @change=\"handleLabelUploadRight\" accept=\".label.gii\" class=\"inputFileLabel\" ref=\"labelInputRight\"/>\r\n              <button @click=\"discardLabelsRight\" :disabled=\"!hasLabelsRight\">丢弃标签</button>\r\n            </div>\r\n            <div class=\"upload-group\">\r\n              <label>纤维文件(.tck)</label>\r\n              <input type=\"file\" @change=\"handleTCKUploadRight\" accept=\".tck\" multiple class=\"inputFileLabel\" ref=\"tckInputRight\"/>\r\n              <button @click=\"clearFibersRight\" :disabled=\"!hasFibersRight\">清空纤维</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, nextTick } from 'vue';\r\nimport { useThreeWorld } from './ThreeWorld';\r\nimport './styles.css';\r\n\r\nexport default {\r\n  name: 'ThreeWorld',\r\n  props: {\r\n    msg: String\r\n  },\r\n  setup() {\r\n    const threeContainerLeft = ref(null);\r\n    const threeContainerRight = ref(null);\r\n\r\n    const sharedState = reactive({\r\n      left: null,   // 占位，稍后赋值\r\n      right: null   // 占位，稍后赋值\r\n    });\r\n\r\n    const leftWorld = useThreeWorld(threeContainerLeft, sharedState, 'left');\r\n    const rightWorld = useThreeWorld(threeContainerRight, sharedState, 'right');\r\n\r\n    nextTick(() => {\r\n      sharedState.left = leftWorld;\r\n      sharedState.right = rightWorld;\r\n    });\r\n\r\n    return {\r\n\r\n      threeContainerLeft,\r\n      threeContainerRight,\r\n      \r\n      // 公共\r\n      surfSysFiles: leftWorld.surfSysFiles,\r\n      \r\n      // 左侧画布\r\n      opacityLeft: leftWorld.opacity,\r\n      hasSurfaceLeft: leftWorld.hasSurface,\r\n      hasLabelsLeft: leftWorld.hasLabels,\r\n      hasFibersLeft: leftWorld.hasFibers,\r\n      surfInputLeft: leftWorld.surfInput,\r\n      labelInputLeft: leftWorld.labelInput,\r\n      tckInputLeft: leftWorld.tckInput,\r\n      viewModeLeft: leftWorld.viewMode,\r\n      surfaceCheckTagLeft: leftWorld.surfaceCheckTag,\r\n      vertexInfoLeft: leftWorld.vertexInfo,\r\n      \r\n      handleSurfaceUploadLeft: leftWorld.handleSurfaceUpload,\r\n      handleLabelUploadLeft: leftWorld.handleLabelUpload,\r\n      handleTCKUploadLeft: leftWorld.handleTCKUpload,\r\n      discardSurfaceLeft: leftWorld.discardSurface,\r\n      discardLabelsLeft: leftWorld.discardLabels,\r\n      clearFibersLeft: leftWorld.clearFibers,\r\n      resetViewLeft: leftWorld.resetView,\r\n      updateOpacityLeft: leftWorld.updateOpacity,\r\n      toggleViewModeLeft: leftWorld.toggleViewMode,\r\n      surfaceCheckLeft: leftWorld.surfaceCheck,\r\n      // 右侧画布\r\n      opacityRight: rightWorld.opacity,\r\n      hasSurfaceRight: rightWorld.hasSurface,\r\n      hasLabelsRight: rightWorld.hasLabels,\r\n      hasFibersRight: rightWorld.hasFibers,\r\n      surfInputRight: rightWorld.surfInput,\r\n      labelInputRight: rightWorld.labelInput,\r\n      tckInputRight: rightWorld.tckInput,\r\n      viewModeRight: rightWorld.viewMode,\r\n      surfaceCheckTagRight: rightWorld.surfaceCheckTag,\r\n      vertexInfoRight: rightWorld.vertexInfo,\r\n      handleSurfaceUploadRight: rightWorld.handleSurfaceUpload,\r\n      handleLabelUploadRight: rightWorld.handleLabelUpload,\r\n      handleTCKUploadRight: rightWorld.handleTCKUpload,\r\n      discardSurfaceRight: rightWorld.discardSurface,\r\n      discardLabelsRight: rightWorld.discardLabels,\r\n      clearFibersRight: rightWorld.clearFibers,\r\n      resetViewRight: rightWorld.resetView,\r\n      updateOpacityRight: rightWorld.updateOpacity,\r\n      toggleViewModeRight: rightWorld.toggleViewMode,\r\n      surfaceCheckRight: rightWorld.surfaceCheck\r\n    };\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=28dfea93\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <ThreeWorld :msg=\"msg\" />\n</template>\n\n<script>\nimport ThreeWorld from './ThreeWorld/index.vue';\n\nexport default {\n  name: 'ThreeWorldWrapper',\n  components: {\n    ThreeWorld\n  },\n  props: {\n    msg: String\n  }\n}\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ThreeWorld.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ThreeWorld.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ThreeWorld.vue?vue&type=template&id=575ea95d\"\nimport script from \"./ThreeWorld.vue?vue&type=script&lang=js\"\nexport * from \"./ThreeWorld.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <ThreeWorld msg=\"Surface and Tractography 3D Viewer\"/>\n  </div>\n</template>\n\n<script>\nimport ThreeWorld from './components/ThreeWorld.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    ThreeWorld\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin: 0;\n  padding: 0;\n  height: 100vh;\n}\nbody {\n  margin: 0;\n  padding: 0;\n}\n</style>\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=30889d3a\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=30889d3a&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkcross_species_platform\"] = self[\"webpackChunkcross_species_platform\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(5253); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","attrs","staticRenderFns","msg","staticClass","_v","_s","ref","on","resetViewLeft","class","active","viewModeLeft","toggleViewModeLeft","surfaceCheckTagLeft","hasSurfaceLeft","hasLabelsLeft","surfaceCheckLeft","directives","name","rawName","value","opacityLeft","expression","domProps","updateOpacityLeft","$event","target","vertexInfoLeft","index","position","x","y","z","undefined","label","_e","color","r","g","b","_l","surfSysFiles","surf_sys_file","key","handleSurfaceUploadLeft","discardSurfaceLeft","handleLabelUploadLeft","discardLabelsLeft","handleTCKUploadLeft","hasFibersLeft","clearFibersLeft","resetViewRight","viewModeRight","toggleViewModeRight","surfaceCheckTagRight","hasSurfaceRight","hasLabelsRight","surfaceCheckRight","opacityRight","updateOpacityRight","vertexInfoRight","handleSurfaceUploadRight","discardSurfaceRight","handleLabelUploadRight","discardLabelsRight","handleTCKUploadRight","hasFibersRight","clearFibersRight","setupLights","scene","ambientLight","THREE","add","directionalLights","intensity","lights","map","config","light","set","createDefaultMaterial","options","opacity","vertexColors","shininess","specular","side","transparent","updateMaterial","material","Object","entries","forEach","needsUpdate","buildFiberLines","fibers","group","center","totalPoints","fiber","i","length","divideScalar","rgbColor","hsl","getHSL","baseColor","h","s","l","baseMaterial","linewidth","geometry","positions","Float32Array","flat","setAttribute","hueVariation","Math","random","saturationVariation","lightnessVariation","setHSL","max","min","clone","copy","line","rotatePoints","pointsArray","rotateX","rotateY","rotateZ","rotationMatrix","makeRotationFromEuler","vector","applyMatrix4","decodeBase64Gzip","base64String","cleanBase64","replace","binaryString","atob","bytes","Uint8Array","charCodeAt","pako","buffer","async","parseGIFTI","content","parser","DOMParser","xmlDoc","parseFromString","dataArrays","getElementsByTagName","pointsData","facesData","dataArray","intent","getAttribute","base64Data","querySelector","textContent","trim","Error","pointsBuffer","facesBuffer","facesArray","Uint32Array","rotation","temp","setIndex","computeVertexNormals","computeBoundingBox","computeBoundingSphere","parseLabelGIFTI","labelBuffer","Int32Array","generateColors","count","colors","hue","saturation","c","abs","m","updateVertexColors","labels","labelColors","vertexCount","attributes","defaultColor","toString","createCamera","width","height","camera","createControls","domElement","controls","OrbitControls","enableDamping","dampingFactor","minDistance","maxDistance","rotateSpeed","zoomSpeed","panSpeed","adjustCameraToObject","object","box","setFromObject","getCenter","size","getSize","maxDim","fov","PI","cameraZ","tan","lookAt","parseTCK","dataView","DataView","decoder","TextDecoder","uint8Array","headerText","headerEnd","slice","decode","headerLines","split","header","commandHistory","startsWith","push","includes","fileOffset","match","parseInt","isLittleEndian","isFloat32","bytesPerFloat","floatReader","offset","getFloat32","getFloat64","tracts","currentTract","nanCount","infCount","done","numTracts","console","log","byteLength","Number","isNaN","Infinity","useThreeWorld","containerRef","sharedState","hasSurface","hasLabels","hasFibers","viewMode","surfaceCheckTag","selectedVertex","vertexInfo","surfInput","labelInput","tckInput","renderer","currentMesh","currentTracks","vertexLabels","needsRender","raycaster","mouse","highlightMaterial","highlightMesh","chooseLabel","initThree","background","container","clientWidth","clientHeight","antialias","alpha","depth","stencil","preserveDrawingBuffer","powerPreference","setSize","setClearColor","setPixelRatio","window","devicePixelRatio","appendChild","addEventListener","onMouseClick","animate","requestAnimationFrame","enabled","update","event","rect","getBoundingClientRect","clientX","left","clientY","top","setFromCamera","intersects","intersectObject","intersect","vertexIndex","face","a","vertexPosition","getX","getY","getZ","highlightVertex","toFixed","flushChooseLabelOnSurf","otherSide","otherWorld","clearHighlight","cho_label","filteredLabels","refreshSurfaceLabel","high_geometry","depthTest","depthWrite","remove","dispose","toggleViewMode","surfaceCheck","handleSurfaceUpload","file","files","loadGIFTIFile","fileReader","FileReader","onload","rotationOptions","result","mesh","error","readAsText","handleLabelUpload","uniqueLabels","Set","sortedLabels","Array","from","sort","handleTCKUpload","arrayBuffer","fiberGroup","discardSurface","discardLabels","deleteAttribute","clearFibers","track","children","child","resetView","updateOpacity","handleResize","aspect","updateProjectionMatrix","onMounted","onBeforeUnmount","removeEventListener","props","String","setup","threeContainerLeft","threeContainerRight","reactive","right","leftWorld","rightWorld","nextTick","surfInputLeft","labelInputLeft","tckInputLeft","surfInputRight","labelInputRight","tckInputRight","component","components","ThreeWorld","Vue","productionTip","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","fulfilled","j","keys","every","splice","n","getter","__esModule","d","definition","o","defineProperty","enumerable","get","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","id","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}