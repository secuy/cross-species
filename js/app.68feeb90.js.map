{"version":3,"file":"js/app.68feeb90.js","mappings":"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","sources":["webpack://cross_species_platform/./src/App.vue","webpack://cross_species_platform/./src/components/ThreeWorld.vue","webpack://cross_species_platform/./src/components/ThreeWorld/index.vue","webpack://cross_species_platform/./src/utils/lightManager.js","webpack://cross_species_platform/./src/utils/materialManager.js","webpack://cross_species_platform/./src/utils/cordTrans.js","webpack://cross_species_platform/./src/utils/giftiParser.js","webpack://cross_species_platform/./src/utils/colorManager.js","webpack://cross_species_platform/./src/utils/cameraManager.js","webpack://cross_species_platform/./src/utils/tckParser.js","webpack://cross_species_platform/./src/components/ThreeWorld/ThreeWorld.js","webpack://cross_species_platform/src/components/ThreeWorld/index.vue","webpack://cross_species_platform/./src/components/ThreeWorld/index.vue?b36b","webpack://cross_species_platform/./src/components/ThreeWorld/index.vue?4e60","webpack://cross_species_platform/src/components/ThreeWorld.vue","webpack://cross_species_platform/./src/components/ThreeWorld.vue?f517","webpack://cross_species_platform/./src/components/ThreeWorld.vue?bfd7","webpack://cross_species_platform/src/App.vue","webpack://cross_species_platform/./src/App.vue?c036","webpack://cross_species_platform/./src/App.vue?0e40","webpack://cross_species_platform/./src/main.js","webpack://cross_species_platform/webpack/bootstrap","webpack://cross_species_platform/webpack/runtime/chunk loaded","webpack://cross_species_platform/webpack/runtime/compat get default export","webpack://cross_species_platform/webpack/runtime/define property getters","webpack://cross_species_platform/webpack/runtime/global","webpack://cross_species_platform/webpack/runtime/hasOwnProperty shorthand","webpack://cross_species_platform/webpack/runtime/jsonp chunk loading","webpack://cross_species_platform/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('ThreeWorld',{attrs:{\"msg\":\"Surface and Tractography 3D Viewer\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ThreeWorld',{attrs:{\"msg\":_vm.msg}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"three-world\"},[_c('h1',[_vm._v(_vm._s(_vm.msg))]),_c('div',{staticClass:\"canvas-container\"},[_c('div',{staticClass:\"canvas-section\"},[_c('div',{ref:\"threeContainerLeft\",staticClass:\"three-container\",attrs:{\"id\":\"three-container-left\"}}),_c('div',{staticClass:\"control-panel\"},[_c('div',{staticClass:\"view-controls\"},[_c('div',{staticClass:\"control-group\"},[_c('button',{on:{\"click\":_vm.resetViewLeft}},[_vm._v(\"重置视图\")]),_c('button',{class:{ active: _vm.viewModeLeft === 'inspect' },on:{\"click\":_vm.toggleViewModeLeft}},[_vm._v(\" \"+_vm._s(_vm.viewModeLeft === 'browse' ? '检查模式' : '浏览模式')+\" \")]),_c('button',{class:{ active: _vm.surfaceCheckTagLeft },attrs:{\"disabled\":!(_vm.hasSurfaceLeft && _vm.hasLabelsLeft)},on:{\"click\":_vm.surfaceCheckLeft}},[_vm._v(\" \"+_vm._s(_vm.surfaceCheckTagLeft ? '取消' : '皮层对齐')+\" \")])]),_c('div',{staticClass:\"opacity-control\"},[_c('label',[_vm._v(\"皮层透明度\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.opacityLeft),expression:\"opacityLeft\"}],attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.01\"},domProps:{\"value\":(_vm.opacityLeft)},on:{\"input\":_vm.updateOpacityLeft,\"__r\":function($event){_vm.opacityLeft=$event.target.value}}})]),(_vm.viewModeLeft === 'inspect' && _vm.vertexInfoLeft)?_c('div',{staticClass:\"vertex-info\"},[_c('h3',[_vm._v(\"顶点信息\")]),_c('p',[_vm._v(\"索引: \"+_vm._s(_vm.vertexInfoLeft.index))]),_c('p',[_vm._v(\"位置: X: \"+_vm._s(_vm.vertexInfoLeft.position.x)+\", Y: \"+_vm._s(_vm.vertexInfoLeft.position.y)+\", Z: \"+_vm._s(_vm.vertexInfoLeft.position.z))]),(_vm.vertexInfoLeft.label !== undefined)?_c('p',[_vm._v(\"标签: \"+_vm._s(_vm.vertexInfoLeft.label))]):_vm._e(),(_vm.vertexInfoLeft.color)?_c('p',[_vm._v(\"颜色: R: \"+_vm._s(_vm.vertexInfoLeft.color.r)+\", G: \"+_vm._s(_vm.vertexInfoLeft.color.g)+\", B: \"+_vm._s(_vm.vertexInfoLeft.color.b))]):_vm._e()]):_vm._e(),(_vm.surfaceCheckTagLeft && _vm.vertexInfoLeft)?_c('div',{staticClass:\"vertex-info\"},[_c('h3',[_vm._v(\"顶点信息\")]),_c('p',[_vm._v(\"索引: \"+_vm._s(_vm.vertexInfoLeft.index))]),_c('p',[_vm._v(\"位置: X: \"+_vm._s(_vm.vertexInfoLeft.position.x)+\", Y: \"+_vm._s(_vm.vertexInfoLeft.position.y)+\", Z: \"+_vm._s(_vm.vertexInfoLeft.position.z))]),(_vm.vertexInfoLeft.label !== undefined)?_c('p',[_vm._v(\"标签: \"+_vm._s(_vm.vertexInfoLeft.label))]):_vm._e(),(_vm.vertexInfoLeft.color)?_c('p',[_vm._v(\"颜色: R: \"+_vm._s(_vm.vertexInfoLeft.color.r)+\", G: \"+_vm._s(_vm.vertexInfoLeft.color.g)+\", B: \"+_vm._s(_vm.vertexInfoLeft.color.b))]):_vm._e()]):_vm._e()]),_c('div',{staticClass:\"file-upload\"},[_c('div',{staticClass:\"upload-group\"},[_c('div',{staticClass:\"title-row\"},[_c('label',[_vm._v(\"表面文件(.surf.gii)\")]),_c('button',{attrs:{\"disabled\":!_vm.hasSurfaceLeft},on:{\"click\":_vm.discardSurfaceLeft}},[_vm._v(\"丢弃皮层\")])]),_c('div',{staticClass:\"select-row\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedSurfLeft),expression:\"selectedSurfLeft\"}],on:{\"input\":_vm.handleSurfSelectLeft,\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedSurfLeft=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"请选择文件\")]),_vm._l((_vm.surfSysNames),function(surfSysName){return _c('option',{key:surfSysName,domProps:{\"value\":surfSysName}},[_vm._v(\" \"+_vm._s(surfSysName)+\" \")])})],2)]),_c('div',{staticClass:\"file-row\"},[_c('input',{ref:\"surfInputLeft\",staticClass:\"inputFileLabel\",attrs:{\"type\":\"file\",\"accept\":\".surf.gii\"},on:{\"change\":_vm.handleSurfaceUploadLeft}})])]),_c('div',{staticClass:\"upload-group\"},[_c('div',{staticClass:\"title-row\"},[_c('label',[_vm._v(\"标签文件(.label.gii)\")]),_c('button',{attrs:{\"disabled\":!_vm.hasLabelsLeft},on:{\"click\":_vm.discardLabelsLeft}},[_vm._v(\"丢弃标签\")])]),_c('div',{staticClass:\"select-row\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedParcLeft),expression:\"selectedParcLeft\"}],on:{\"input\":_vm.handleParcSelectLeft,\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedParcLeft=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"请选择文件\")]),_vm._l((_vm.parcSysNames),function(parcSysName){return _c('option',{key:parcSysName,domProps:{\"value\":parcSysName}},[_vm._v(\" \"+_vm._s(parcSysName)+\" \")])})],2)]),_c('div',{staticClass:\"file-row\"},[_c('input',{ref:\"labelInputLeft\",staticClass:\"inputFileLabel\",attrs:{\"type\":\"file\",\"accept\":\".label.gii\"},on:{\"change\":_vm.handleLabelUploadLeft}})])]),_c('div',{staticClass:\"upload-group\"},[_c('div',{staticClass:\"title-row\"},[_c('label',[_vm._v(\"纤维文件(.tck)\")]),_c('button',{attrs:{\"disabled\":!_vm.hasFibersLeft},on:{\"click\":_vm.clearFibersLeft}},[_vm._v(\"清空纤维\")])]),_c('input',{ref:\"tckInputLeft\",staticClass:\"inputFileLabel\",attrs:{\"type\":\"file\",\"accept\":\".tck\",\"multiple\":\"\"},on:{\"change\":_vm.handleTCKUploadLeft}})])])])]),_c('div',{staticClass:\"canvas-section\"},[_c('div',{ref:\"threeContainerRight\",staticClass:\"three-container\",attrs:{\"id\":\"three-container-right\"}}),_c('div',{staticClass:\"control-panel\"},[_c('div',{staticClass:\"view-controls\"},[_c('div',{staticClass:\"control-group\"},[_c('button',{on:{\"click\":_vm.resetViewRight}},[_vm._v(\"重置视图\")]),_c('button',{class:{ active: _vm.viewModeRight === 'inspect' },on:{\"click\":_vm.toggleViewModeRight}},[_vm._v(\" \"+_vm._s(_vm.viewModeRight === 'browse' ? '检查模式' : '浏览模式')+\" \")]),_c('button',{class:{ active: _vm.surfaceCheckTagRight },attrs:{\"disabled\":!(_vm.hasSurfaceRight && _vm.hasLabelsRight)},on:{\"click\":_vm.surfaceCheckRight}},[_vm._v(\" \"+_vm._s(_vm.surfaceCheckTagRight ? '取消' : '皮层对齐')+\" \")])]),_c('div',{staticClass:\"opacity-control\"},[_c('label',[_vm._v(\"皮层透明度\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.opacityRight),expression:\"opacityRight\"}],attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.01\"},domProps:{\"value\":(_vm.opacityRight)},on:{\"input\":_vm.updateOpacityRight,\"__r\":function($event){_vm.opacityRight=$event.target.value}}})]),(_vm.viewModeRight === 'inspect' && _vm.vertexInfoRight)?_c('div',{staticClass:\"vertex-info\"},[_c('h3',[_vm._v(\"顶点信息\")]),_c('p',[_vm._v(\"索引: \"+_vm._s(_vm.vertexInfoRight.index))]),_c('p',[_vm._v(\"位置: X: \"+_vm._s(_vm.vertexInfoRight.position.x)+\", Y: \"+_vm._s(_vm.vertexInfoRight.position.y)+\", Z: \"+_vm._s(_vm.vertexInfoRight.position.z))]),(_vm.vertexInfoRight.label !== undefined)?_c('p',[_vm._v(\"标签: \"+_vm._s(_vm.vertexInfoRight.label))]):_vm._e(),(_vm.vertexInfoRight.color)?_c('p',[_vm._v(\"颜色: R: \"+_vm._s(_vm.vertexInfoRight.color.r)+\", G: \"+_vm._s(_vm.vertexInfoRight.color.g)+\", B: \"+_vm._s(_vm.vertexInfoRight.color.b))]):_vm._e()]):_vm._e(),(_vm.surfaceCheckTagRight && _vm.vertexInfoRight)?_c('div',{staticClass:\"vertex-info\"},[_c('h3',[_vm._v(\"顶点信息\")]),_c('p',[_vm._v(\"索引: \"+_vm._s(_vm.vertexInfoRight.index))]),_c('p',[_vm._v(\"位置: X: \"+_vm._s(_vm.vertexInfoRight.position.x)+\", Y: \"+_vm._s(_vm.vertexInfoRight.position.y)+\", Z: \"+_vm._s(_vm.vertexInfoRight.position.z))]),(_vm.vertexInfoRight.label !== undefined)?_c('p',[_vm._v(\"标签: \"+_vm._s(_vm.vertexInfoRight.label))]):_vm._e(),(_vm.vertexInfoRight.color)?_c('p',[_vm._v(\"颜色: R: \"+_vm._s(_vm.vertexInfoRight.color.r)+\", G: \"+_vm._s(_vm.vertexInfoRight.color.g)+\", B: \"+_vm._s(_vm.vertexInfoRight.color.b))]):_vm._e()]):_vm._e()]),_c('div',{staticClass:\"file-upload\"},[_c('div',{staticClass:\"upload-group\"},[_c('div',{staticClass:\"title-row\"},[_c('label',[_vm._v(\"表面文件(.surf.gii)\")]),_c('button',{attrs:{\"disabled\":!_vm.hasSurfaceRight},on:{\"click\":_vm.discardSurfaceRight}},[_vm._v(\"丢弃皮层\")])]),_c('div',{staticClass:\"select-row\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedSurfRight),expression:\"selectedSurfRight\"}],on:{\"input\":_vm.handleSurfSelectRight,\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedSurfRight=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"请选择文件\")]),_vm._l((_vm.surfSysNames),function(surfSysName){return _c('option',{key:surfSysName,domProps:{\"value\":surfSysName}},[_vm._v(\" \"+_vm._s(surfSysName)+\" \")])})],2)]),_c('div',{staticClass:\"file-row\"},[_c('input',{ref:\"surfInputRight\",staticClass:\"inputFileLabel\",attrs:{\"type\":\"file\",\"accept\":\".surf.gii\"},on:{\"change\":_vm.handleSurfaceUploadRight}})])]),_c('div',{staticClass:\"upload-group\"},[_c('div',{staticClass:\"title-row\"},[_c('label',[_vm._v(\"标签文件(.label.gii)\")]),_c('button',{attrs:{\"disabled\":!_vm.hasLabelsRight},on:{\"click\":_vm.discardLabelsRight}},[_vm._v(\"丢弃标签\")])]),_c('div',{staticClass:\"select-row\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedParcRight),expression:\"selectedParcRight\"}],on:{\"input\":_vm.handleParcSelectRight,\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedParcRight=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"请选择文件\")]),_vm._l((_vm.parcSysNames),function(parcSysName){return _c('option',{key:parcSysName,domProps:{\"value\":parcSysName}},[_vm._v(\" \"+_vm._s(parcSysName)+\" \")])})],2)]),_c('div',{staticClass:\"file-row\"},[_c('input',{ref:\"labelInputRight\",staticClass:\"inputFileLabel\",attrs:{\"type\":\"file\",\"accept\":\".label.gii\"},on:{\"change\":_vm.handleLabelUploadRight}})])]),_c('div',{staticClass:\"upload-group\"},[_c('div',{staticClass:\"title-row\"},[_c('label',[_vm._v(\"纤维文件(.tck)\")]),_c('button',{attrs:{\"disabled\":!_vm.hasFibersRight},on:{\"click\":_vm.clearFibersRight}},[_vm._v(\"清空纤维\")])]),_c('input',{ref:\"tckInputRight\",staticClass:\"inputFileLabel\",attrs:{\"type\":\"file\",\"accept\":\".tck\",\"multiple\":\"\"},on:{\"change\":_vm.handleTCKUploadRight}})])])])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import * as THREE from 'three';\r\n\r\n/**\r\n * 创建并配置场景的光照系统\r\n * @param {THREE.Scene} scene - Three.js场景对象\r\n * @returns {Object} 包含所有光源的对象，方便后续管理\r\n */\r\nexport function setupLights(scene) {\r\n    // 环境光\r\n    const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);\r\n    scene.add(ambientLight);\r\n    \r\n    // 方向光配置\r\n    const directionalLights = [\r\n        { position: [1, 1, 1], intensity: 0.5 },\r\n        { position: [-1, -1, -1], intensity: 0.5 },\r\n        { position: [0, 1, -1], intensity: 0.5 },\r\n        { position: [0, -1, 1], intensity: 0.5 }\r\n    ];\r\n\r\n    // 创建并添加方向光\r\n    const lights = directionalLights.map((config) => {\r\n        const light = new THREE.DirectionalLight(0xffffff, config.intensity);\r\n        light.position.set(...config.position);\r\n        scene.add(light);\r\n        return light;\r\n    });\r\n\r\n    return {\r\n        ambientLight,\r\n        directionalLights: lights\r\n    };\r\n} ","import * as THREE from 'three';\r\n\r\n/**\r\n * 创建默认材质\r\n * @param {Object} options - 材质配置选项\r\n * @returns {THREE.MeshPhongMaterial} 创建的材质对象\r\n */\r\nexport function createDefaultMaterial(options = {}) {\r\n    const {\r\n        opacity = 1,\r\n        vertexColors = false,\r\n        shininess = 5,\r\n        specular = new THREE.Color(0x111111)\r\n    } = options;\r\n\r\n    return new THREE.MeshPhongMaterial({\r\n        color: new THREE.Color(0x808080),\r\n        side: THREE.DoubleSide,\r\n        opacity,\r\n        transparent: opacity < 1,\r\n        vertexColors,\r\n        shininess,\r\n        specular\r\n    });\r\n}\r\n\r\n/**\r\n * 更新材质属性\r\n * @param {THREE.Material} material - 要更新的材质\r\n * @param {Object} options - 要更新的属性\r\n */\r\nexport function updateMaterial(material, options = {}) {\r\n    Object.entries(options).forEach(([key, value]) => {\r\n        if (material[key] !== undefined) {\r\n            material[key] = value;\r\n        }\r\n    });\r\n    material.needsUpdate = true;\r\n} \r\n\r\n// 假设 tracts 是一个数组，\r\n// 每个 tract 又是 [[x,y,z], [x,y,z], …] 形式的点列表\r\nexport function buildFiberLines(fibers) {\r\n    const group = new THREE.Group();\r\n    \r\n    // 计算所有纤维的中心点\r\n    const center = new THREE.Vector3();\r\n    let totalPoints = 0;\r\n    \r\n    fibers.forEach(fiber => {\r\n        for (let i = 0; i < fiber.length; i += 3) {\r\n            center.x += fiber[i];\r\n            center.y += fiber[i + 1];\r\n            center.z += fiber[i + 2];\r\n            totalPoints++;\r\n        }\r\n    });\r\n    \r\n    center.divideScalar(totalPoints);\r\n    \r\n    // 创建RGB颜色\r\n    const rgbColor = new THREE.Color(center.x, center.y, center.z);\r\n    \r\n    // 获取HSL值\r\n    const hsl = {};\r\n    rgbColor.getHSL(hsl);\r\n    \r\n    // 使用HSL值作为基础颜色\r\n    const baseColor = {\r\n        h: hsl.h,\r\n        s: 0.8,           // 固定饱和度\r\n        l: 0.6            // 固定亮度\r\n    };\r\n    \r\n    // 给每条纤维一个材料（可改成不同颜色或材质）\r\n    const baseMaterial = new THREE.LineBasicMaterial({ linewidth: 1 });\r\n    \r\n    fibers.forEach((fiber) => {\r\n        const geometry = new THREE.BufferGeometry();\r\n        const positions = new Float32Array(fiber.flat());\r\n        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\r\n        \r\n        // 在基础颜色周围进行小范围随机变化\r\n        const hueVariation = (Math.random() - 0.5) * 0.1; // ±0.05的色相变化\r\n        const saturationVariation = (Math.random() - 0.5) * 0.1; // ±0.05的饱和度变化\r\n        const lightnessVariation = (Math.random() - 0.5) * 0.1; // ±0.05的亮度变化\r\n        \r\n        const color = new THREE.Color().setHSL(\r\n            (baseColor.h + hueVariation) % 1,\r\n            Math.max(0, Math.min(1, baseColor.s + saturationVariation)),\r\n            Math.max(0, Math.min(1, baseColor.l + lightnessVariation))\r\n        );\r\n        \r\n        const material = baseMaterial.clone();\r\n        material.color.copy(color);\r\n        \r\n        const line = new THREE.Line(geometry, material);\r\n        group.add(line);\r\n    });\r\n    \r\n    return group;\r\n}","import * as THREE from 'three';\r\n\r\n/**\r\n * 对顶点坐标进行旋转\r\n * @param {Float32Array} pointsArray - 顶点坐标数组\r\n * @param {Object} options - 旋转选项\r\n * @param {number} [options.rotateX=0] - 绕X轴旋转的角度（弧度）\r\n * @param {number} [options.rotateY=0] - 绕Y轴旋转的角度（弧度）\r\n * @param {number} [options.rotateZ=0] - 绕Z轴旋转的角度（弧度）\r\n * @returns {Float32Array} 旋转后的顶点坐标数组\r\n */\r\nexport function rotatePoints(pointsArray, options = {}) {\r\n    const { rotateX = 0, rotateY = 0, rotateZ = 0 } = options;\r\n    \r\n    // 创建旋转矩阵\r\n    const rotationMatrix = new THREE.Matrix4();\r\n    rotationMatrix.makeRotationFromEuler(new THREE.Euler(rotateX, rotateY, rotateZ));\r\n    \r\n    // 创建临时向量\r\n    const vector = new THREE.Vector3();\r\n    \r\n    // 对每个顶点应用旋转\r\n    for (let i = 0; i < pointsArray.length; i += 3) {\r\n        vector.set(pointsArray[i], pointsArray[i + 1], pointsArray[i + 2]);\r\n        vector.applyMatrix4(rotationMatrix);\r\n        pointsArray[i] = vector.x;\r\n        pointsArray[i + 1] = vector.y;\r\n        pointsArray[i + 2] = vector.z;\r\n    }\r\n    \r\n    return pointsArray;\r\n}\r\n","import * as THREE from 'three';\r\nimport pako from 'pako';\r\nimport { rotatePoints } from './cordTrans';\r\n/**\r\n * 解码Base64编码的GZip数据\r\n * @param {string} base64String - Base64编码的字符串\r\n * @returns {ArrayBuffer} 解码后的数据\r\n */\r\nfunction decodeBase64Gzip(base64String) {\r\n    const cleanBase64 = base64String\r\n        .replace(/\\s/g, '')\r\n        .replace(/[^A-Za-z0-9+/=]/g, '');\r\n\r\n    const binaryString = atob(cleanBase64);\r\n    const bytes = new Uint8Array(binaryString.length);\r\n    for (let i = 0; i < binaryString.length; i++) {\r\n        bytes[i] = binaryString.charCodeAt(i);\r\n    }\r\n\r\n    return pako.inflate(bytes).buffer;\r\n}\r\n\r\n/**\r\n * 解析GIFTI文件内容\r\n * @param {string} content - GIFTI文件的XML内容\r\n * @param {Object} [options] - 解析选项\r\n * @param {Object} [options.rotation] - 旋转选项\r\n * @param {number} [options.rotation.rotateX=0] - 绕X轴旋转的角度（弧度）\r\n * @param {number} [options.rotation.rotateY=0] - 绕Y轴旋转的角度（弧度）\r\n * @param {number} [options.rotation.rotateZ=0] - 绕Z轴旋转的角度（弧度）\r\n * @returns {Promise<THREE.BufferGeometry>} 解析后的几何体\r\n */\r\nexport async function parseGIFTI(content, options = {}) {\r\n    const parser = new DOMParser();\r\n    const xmlDoc = parser.parseFromString(content, \"text/xml\");\r\n    \r\n    const dataArrays = xmlDoc.getElementsByTagName('DataArray');\r\n    let pointsData = null;\r\n    let facesData = null;\r\n\r\n    for (let i = 0; i < dataArrays.length; i++) {\r\n        const dataArray = dataArrays[i];\r\n        const intent = dataArray.getAttribute('Intent');\r\n        const base64Data = dataArray.querySelector('Data')?.textContent;\r\n\r\n        if (intent === 'NIFTI_INTENT_POINTSET' && base64Data) {\r\n            pointsData = base64Data.trim();\r\n        } else if (intent === 'NIFTI_INTENT_TRIANGLE' && base64Data) {\r\n            facesData = base64Data.trim();\r\n        }\r\n    }\r\n\r\n    if (!pointsData || !facesData) {\r\n        throw new Error('无法找到顶点或面数据');\r\n    }\r\n\r\n    const pointsBuffer = await decodeBase64Gzip(pointsData);\r\n    const facesBuffer = await decodeBase64Gzip(facesData);\r\n    \r\n    let pointsArray = new Float32Array(pointsBuffer);\r\n    const facesArray = new Uint32Array(facesBuffer);\r\n\r\n    // 应用旋转（如果提供了旋转选项）\r\n    if (options.rotation) {\r\n        pointsArray = rotatePoints(pointsArray, options.rotation);\r\n    }\r\n\r\n    // 确保面的顶点顺序正确（逆时针）\r\n    for (let i = 0; i < facesArray.length; i += 3) {\r\n        const temp = facesArray[i + 1];\r\n        facesArray[i + 1] = facesArray[i + 2];\r\n        facesArray[i + 2] = temp;\r\n    }\r\n\r\n    const geometry = new THREE.BufferGeometry();\r\n    geometry.setAttribute('position', new THREE.BufferAttribute(pointsArray, 3));\r\n    geometry.setIndex(new THREE.BufferAttribute(facesArray, 1));\r\n    geometry.computeVertexNormals();\r\n    geometry.computeBoundingBox();\r\n    geometry.computeBoundingSphere();\r\n\r\n    return geometry;\r\n}\r\n\r\n/**\r\n * 解析标签文件内容\r\n * @param {string} content - 标签文件的XML内容\r\n * @returns {Promise<Int32Array>} 解析后的标签数据\r\n */\r\nexport async function parseLabelGIFTI(content) {\r\n    const parser = new DOMParser();\r\n    const xmlDoc = parser.parseFromString(content, \"text/xml\");\r\n    \r\n    const dataArray = xmlDoc.querySelector('DataArray');\r\n    if (!dataArray) {\r\n        throw new Error('未找到数据数组');\r\n    }\r\n\r\n    const base64Data = dataArray.querySelector('Data')?.textContent;\r\n    if (!base64Data) {\r\n        throw new Error('未找到标签数据');\r\n    }\r\n\r\n    const labelBuffer = await decodeBase64Gzip(base64Data);\r\n    return new Int32Array(labelBuffer);\r\n} ","import * as THREE from 'three';\r\n\r\n/**\r\n * 生成均匀分布的颜色\r\n * @param {number} count - 需要生成的颜色数量\r\n * @returns {Object} 颜色映射对象，key为索引，value为THREE.Color对象\r\n */\r\nexport function generateColors(count) {\r\n    const colors = {};\r\n    for (let i = 0; i < count; i++) {\r\n        const hue = (i / count) * 360;\r\n        const saturation = 0.8;\r\n        const value = 0.9;\r\n        \r\n        const h = hue / 60;\r\n        const c = value * saturation;\r\n        const x = c * (1 - Math.abs((h % 2) - 1));\r\n        const m = value - c;\r\n        \r\n        let r, g, b;\r\n        if (h < 1) { [r, g, b] = [c, x, 0]; }\r\n        else if (h < 2) { [r, g, b] = [x, c, 0]; }\r\n        else if (h < 3) { [r, g, b] = [0, c, x]; }\r\n        else if (h < 4) { [r, g, b] = [0, x, c]; }\r\n        else if (h < 5) { [r, g, b] = [x, 0, c]; }\r\n        else { [r, g, b] = [c, 0, x]; }\r\n        \r\n        colors[i] = new THREE.Color(\r\n            (r + m),\r\n            (g + m),\r\n            (b + m)\r\n        );\r\n    }\r\n    return colors;\r\n}\r\n\r\n/**\r\n * 更新几何体的顶点颜色\r\n * @param {THREE.BufferGeometry} geometry - 要更新的几何体\r\n * @param {Int32Array} labels - 顶点标签数据\r\n * @param {Object} labelColors - 标签到颜色的映射,labelsColors可以为空\r\n */\r\nexport function updateVertexColors(geometry, labels, labelColors) {\r\n    const vertexCount = geometry.attributes.position.count;\r\n    const colors = new Float32Array(vertexCount * 3);\r\n    const defaultColor = new THREE.Color(0x808080);\r\n\r\n    for (let i = 0; i < vertexCount; i++) {\r\n        let color = defaultColor;\r\n\r\n        if (labels && labels.length === vertexCount) {\r\n            const label = labels[i].toString();\r\n            color = label === \"0\" ? defaultColor : labelColors[label] || defaultColor;\r\n        }\r\n\r\n        colors[i * 3] = color.r;\r\n        colors[i * 3 + 1] = color.g;\r\n        colors[i * 3 + 2] = color.b;\r\n    }\r\n\r\n    geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));\r\n    geometry.attributes.color.needsUpdate = true;\r\n}","import * as THREE from 'three';\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\r\n\r\n/**\r\n * 创建并配置相机\r\n * @param {number} width - 视口宽度\r\n * @param {number} height - 视口高度\r\n * @returns {THREE.PerspectiveCamera} 配置好的相机对象\r\n */\r\nexport function createCamera(width, height) {\r\n    const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);\r\n    camera.position.z = 10;\r\n    return camera;\r\n}\r\n\r\n/**\r\n * 创建并配置轨道控制器\r\n * @param {THREE.PerspectiveCamera} camera - 相机对象\r\n * @param {HTMLElement} domElement - 控制器绑定的DOM元素\r\n * @returns {OrbitControls} 配置好的控制器对象\r\n */\r\nexport function createControls(camera, domElement) {\r\n    const controls = new OrbitControls(camera, domElement);\r\n    controls.enableDamping = true;\r\n    controls.dampingFactor = 0.1;\r\n    controls.minDistance = 1;\r\n    controls.maxDistance = 200;\r\n    controls.rotateSpeed = 0.3;\r\n    controls.zoomSpeed = 0.5;\r\n    controls.panSpeed = 0.3;\r\n    return controls;\r\n}\r\n\r\n/**\r\n * 调整相机位置以适应模型\r\n * @param {THREE.PerspectiveCamera} camera - 相机对象\r\n * @param {THREE.Object3D} object - 要适应的模型对象\r\n * @param {OrbitControls} controls - 轨道控制器对象\r\n */\r\nexport function adjustCameraToObject(camera, object) {\r\n    const box = new THREE.Box3().setFromObject(object);\r\n    const center = box.getCenter(new THREE.Vector3());\r\n    const size = box.getSize(new THREE.Vector3());\r\n    const maxDim = Math.max(size.x, size.y, size.z);\r\n    const fov = camera.fov * (Math.PI / 180);\r\n    let cameraZ = Math.abs(maxDim / Math.tan(fov / 2));\r\n    camera.position.z = cameraZ * 3;\r\n    camera.lookAt(center);\r\n\r\n}\r\n","import { rotatePoints } from './cordTrans';\r\n\r\n/**\r\n * 解析.tck文件内容\r\n * @param {ArrayBuffer} buffer - .tck文件的二进制数据\r\n * @returns {Promise<THREE.BufferGeometry>} 解析后的几何体\r\n */\r\nexport async function parseTCK(buffer, options = {}) {\r\n    const dataView = new DataView(buffer);\r\n    const decoder = new TextDecoder('utf-8');\r\n    const uint8Array = new Uint8Array(buffer);\r\n\r\n    // 1. 提取header\r\n    let headerText = '';\r\n    let headerEnd = 0;\r\n    for (let i = 0; i < uint8Array.length - 2; i++) {\r\n        const slice = decoder.decode(uint8Array.slice(i, i + 3));\r\n        if (slice === 'END') {\r\n            headerEnd = i + 3; // END结束\r\n            break;\r\n        }\r\n    }\r\n    if (headerEnd === 0) {\r\n        throw new Error('Header解析失败，未找到END');\r\n    }\r\n    headerText = decoder.decode(uint8Array.slice(0, headerEnd));\r\n    const headerLines = headerText.split('\\n');\r\n\r\n    // 2. 解析header为字典\r\n    const header = {};\r\n    const commandHistory = [];\r\n    for (const line of headerLines) {\r\n        if (line === 'END') break;\r\n        if (line.startsWith('mrtrix tracks')) {\r\n            header['first_line'] = 'mrtrix tracks';\r\n        } else if (line.startsWith('command_history:')) {\r\n            commandHistory.push(line.split(':')[1].trim());\r\n        } else if (line.includes(':')) {\r\n            const [key, value] = line.split(':');\r\n            header[key.trim()] = value.trim();\r\n        }\r\n    }\r\n    header['command_history'] = commandHistory;\r\n\r\n    // 3. 确定数据开始offset\r\n    let fileOffset = 0;\r\n    if (header['file']) {\r\n        const match = header['file'].match(/\\d+/);\r\n        if (match) {\r\n            fileOffset = parseInt(match[0]);\r\n        }\r\n    }\r\n\r\n    // 4. 确定数据格式\r\n    const isLittleEndian = header['datatype'].includes('LE');\r\n    const isFloat32 = header['datatype'].includes('32');\r\n    const bytesPerFloat = isFloat32 ? 4 : 8;\r\n    const floatReader = isFloat32\r\n        ? (offset) => dataView.getFloat32(offset, isLittleEndian)\r\n        : (offset) => dataView.getFloat64(offset, isLittleEndian);\r\n\r\n    // 5. 读取fiber数据\r\n    let offset = fileOffset;\r\n    const tracts = [];\r\n    let currentTract = [];\r\n    let nanCount = 0;\r\n    let infCount = 0;\r\n    let done = false;\r\n\r\n    // 读取count指定的轨迹数量\r\n    const numTracts = parseInt(header['count']);\r\n    console.log('预期轨迹数量:', numTracts);\r\n    \r\n    while (!done && offset + bytesPerFloat <= buffer.byteLength && tracts.length < numTracts) {\r\n        const x = floatReader(offset);\r\n        const y = floatReader(offset + bytesPerFloat);\r\n        const z = floatReader(offset + bytesPerFloat * 2);\r\n        offset += bytesPerFloat * 3;\r\n\r\n        if (Number.isNaN(x) || Number.isNaN(y) || Number.isNaN(z)) {\r\n            nanCount++;\r\n            if (nanCount === 1) {\r\n                // 当前fiber结束\r\n                if (currentTract.length > 0) {\r\n                    // 应用旋转（如果提供了旋转选项）\r\n                    if (options.rotation) {\r\n                        currentTract = rotatePoints(currentTract, options.rotation);\r\n                    }\r\n                    tracts.push(currentTract);\r\n                    currentTract = [];\r\n                }\r\n                nanCount = 0;\r\n            }\r\n        } else if (x === Infinity || y === Infinity || z === Infinity) {\r\n            infCount++;\r\n            if (infCount === 1) {\r\n                done = true;\r\n            }\r\n        } else {\r\n            nanCount = 0;\r\n            currentTract.push(x, y, z);\r\n        }\r\n    }\r\n\r\n    // 添加最后一个轨迹（如果有的话）\r\n    if (currentTract.length > 0) {\r\n        tracts.push(currentTract);\r\n    }\r\n\r\n    console.log(`总共读取了 ${tracts.length} 条tract`);\r\n    return tracts;\r\n}","import { ref, onMounted, onBeforeUnmount } from 'vue';\nimport * as THREE from 'three';\nimport { setupLights } from '../../utils/lightManager';\nimport { createDefaultMaterial, updateMaterial, buildFiberLines } from '../../utils/materialManager';\nimport { parseGIFTI, parseLabelGIFTI } from '../../utils/giftiParser';\nimport { generateColors, updateVertexColors } from '../../utils/colorManager';\nimport { createCamera, createControls, adjustCameraToObject } from '../../utils/cameraManager';\nimport { parseTCK } from '../../utils/tckParser';\n\nexport function useThreeWorld(containerRef, sharedState, side) {\n  const opacity = ref(1);\n  const hasSurface = ref(false);\n  const hasLabels = ref(false);\n  const hasFibers = ref(false);\n  const viewMode = ref('browse'); // 'browse' 或 'inspect'\n  const surfaceCheckTag = ref(false);\n  const selectedVertex = ref(null);\n  const vertexInfo = ref(null);\n  const surfInput = ref(null);\n  const labelInput = ref(null);\n  const tckInput = ref(null);\n  const surfSysNames = ref([]);\n  const parcSysNames = ref([]);\n  \n  let scene = null;\n  let camera = null;\n  let renderer = null;\n  let controls = null;\n  let currentMesh = null;\n  let currentTracks = [];\n  let vertexLabels = null;\n  let labelColors = {};\n  let needsRender = true;\n  let raycaster = null;\n  let mouse = null;\n  let highlightMaterial = null;\n  let highlightMesh = null;\n  let chooseLabel = null;\n\n  /**\n   * 初始化Three.js场景\n   */\n  const initThree = () => {\n    if (!containerRef.value) return;\n\n    // 创建场景\n    scene = new THREE.Scene();\n    scene.background = new THREE.Color(0x2c2c2c);\n\n    // 创建相机和控制器\n    const container = containerRef.value;\n    const width = container.clientWidth;\n    const height = container.clientHeight;\n    \n    camera = createCamera(width, height);\n    renderer = new THREE.WebGLRenderer({\n      antialias: true,\n      alpha: false,\n      depth: true,\n      stencil: false,\n      preserveDrawingBuffer: false,\n      powerPreference: \"high-performance\"\n    });\n    \n    renderer.setSize(width, height);\n    renderer.setClearColor(0x2c2c2c, 1);\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n    container.appendChild(renderer.domElement);\n\n    controls = createControls(camera, renderer.domElement);\n    \n    // 设置光照\n    setupLights(scene);\n\n    // 初始化射线检测器和鼠标位置\n    raycaster = new THREE.Raycaster();\n    mouse = new THREE.Vector2();\n\n    // 添加鼠标点击事件监听\n    renderer.domElement.addEventListener('click', onMouseClick);\n\n    // 开始动画循环\n    animate();\n  };\n\n  /**\n   * 动画循环\n   */\n  const animate = () => {\n    if (!renderer || !scene || !camera) return;\n    requestAnimationFrame(animate);\n    if (controls && controls.enabled && (controls.update() || needsRender)) {\n      renderer.render(scene, camera);\n      needsRender = false;\n    }\n  };\n\n  /**\n   * 处理鼠标点击皮层事件\n   */\n  const onMouseClick = (event) => {\n    if (!renderer || !camera || !currentMesh || (viewMode.value !== 'inspect' && !surfaceCheckTag.value) ) return;\n\n    // 计算鼠标在归一化设备坐标中的位置\n    const rect = renderer.domElement.getBoundingClientRect();\n    mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;\n    mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n\n    // 更新射线\n    raycaster.setFromCamera(mouse, camera);\n\n    // 检测射线与模型的交点\n    const intersects = raycaster.intersectObject(currentMesh);\n\n    if (intersects.length > 0) {\n      const intersect = intersects[0];\n      const vertexIndex = intersect.face.a;\n      \n      // 获取顶点位置\n      const position = currentMesh.geometry.attributes.position;\n      const vertexPosition = new THREE.Vector3(\n        position.getX(vertexIndex),\n        position.getY(vertexIndex),\n        position.getZ(vertexIndex)\n      );\n\n      // 高亮选中的顶点\n      highlightVertex(vertexPosition);\n\n      // 获取顶点信息\n      selectedVertex.value = vertexIndex;\n      vertexInfo.value = {\n        index: vertexIndex,\n        position: {\n          x: vertexPosition.x.toFixed(2),\n          y: vertexPosition.y.toFixed(2),\n          z: vertexPosition.z.toFixed(2)\n        }\n      };\n\n      // 如果有标签，添加标签信息\n      if (hasLabels.value && vertexLabels) {\n        const label = vertexLabels[vertexIndex];\n        vertexInfo.value.label = label;\n        chooseLabel = label;\n        if (labelColors[label.toString()]) {\n          const color = labelColors[label.toString()];\n          vertexInfo.value.color = {\n            r: color.r.toFixed(2),\n            g: color.g.toFixed(2),\n            b: color.b.toFixed(2)\n          };\n        }\n      }\n      \n      // 如果是皮层检查功能则需要进行标签选择\n      if(surfaceCheckTag && viewMode.value !== 'inspect') {\n        // 将所选标签保留 ，其他标签置为0\n        flushChooseLabelOnSurf(chooseLabel);\n        // 找到另一个画布对应的label\n        const otherSide = side === 'left' ? 'right' : 'left';\n        const otherWorld = sharedState[otherSide];\n        otherWorld.flushChooseLabelOnSurf(chooseLabel);\n      }\n      needsRender = true;\n\n    } else {\n      // 如果没有选中任何顶点，清除高亮和信息\n      clearHighlight();\n      selectedVertex.value = null;\n      vertexInfo.value = null;\n      needsRender = true;\n    }\n  };\n\n  /**\n   * 用来一个画布对另一个画布的刷新函数，用于皮层检查，只显示皮层中选中的一个颜色\n   */\n  const flushChooseLabelOnSurf = (cho_label) => {\n    if(vertexLabels && labelColors) {\n      const filteredLabels = vertexLabels.map(label => label === cho_label ? label : 0);\n      updateVertexColors(currentMesh.geometry, filteredLabels, labelColors);\n    }\n    needsRender = true;\n  }\n\n\n  /**\n   * 用来重新刷新皮层标签，重新填充全脑标签\n   */\n  const refreshSurfaceLabel = () => {\n    if (hasLabels.value && vertexLabels) {\n      // 恢复原标签\n      updateVertexColors(currentMesh.geometry, vertexLabels, labelColors);\n      // 清除高亮点\n      clearHighlight();\n      selectedVertex.value = null;\n      vertexInfo.value = null;\n    }\n    needsRender = true;\n  }\n\n  /**\n   * 高亮选中的顶点\n   */\n  const highlightVertex = (position) => {\n    // 清除之前的高亮\n    clearHighlight();\n\n    // 创建一个非常大的球体，确保可见\n    const high_geometry = new THREE.SphereGeometry(2, 32, 32);\n    \n    highlightMaterial = new THREE.MeshPhongMaterial({\n      color: 0xdddddd,\n      transparent: true,\n      depthTest: false, // 禁用深度测试，确保始终显示在最前面\n      depthWrite: false\n    });\n    \n    highlightMesh = new THREE.Mesh(high_geometry, highlightMaterial);\n    highlightMesh.position.copy(position);\n    \n    // 将高亮对象添加到场景\n    scene.add(highlightMesh);\n    \n    // 强制立即渲染\n    renderer.render(scene, camera);\n    needsRender = true;\n  };\n\n  /**\n   * 清除高亮\n   */\n  const clearHighlight = () => {\n    if (highlightMesh) {\n      scene.remove(highlightMesh);\n      highlightMesh.geometry.dispose();\n      highlightMaterial.dispose();\n      highlightMesh = null;\n      needsRender = true;\n    }\n  };\n\n  /**\n   * 切换查看模式\n   */\n  const toggleViewMode = () => {\n    surfaceCheckTag.value = false;\n    \n    refreshSurfaceLabel();\n    \n    viewMode.value = viewMode.value === 'browse' ? 'inspect' : 'browse';\n    \n    needsRender = true;\n  };\n\n  /**\n   * 进行皮层检查\n   */\n  const surfaceCheck = () => {\n    // 要对检查模式进行关闭，进入普通的浏览模式，并且对于两个画布都是如此\n    if(viewMode.value === 'inspect') {\n      toggleViewMode();\n    }\n\n    if(surfaceCheckTag.value) {\n      surfaceCheckTag.value = false;\n    } else {\n      surfaceCheckTag.value = true;\n    }\n    refreshSurfaceLabel();\n    // 刷新另一个\n    const otherSide = side === 'left' ? 'right' : 'left';\n    const otherWorld = sharedState[otherSide];\n    \n    otherWorld.refreshSurfaceLabel();\n    needsRender = true;\n  }\n\n  /**\n   * 从服务器加载GIFTI文件\n   */\n  const loadGIFTIFileFromServer = async (filename) => {\n    try {\n      const response = await fetch(`/cross-species/surfaces/${filename}`);\n      if (!response.ok) {\n        throw new Error('Failed to load surface file');\n      }\n      const fileContent = await response.text();\n      await loadGIFTIFileContent(fileContent);\n    } catch (error) {\n      console.error('从服务器加载GIFTI文件时出错:', error);\n    }\n  };\n\n  /**\n   * 加载GIFTI文件内容\n   */\n  const loadGIFTIFileContent = async (fileContent) => {\n    try {\n      // 设置旋转选项，绕X轴逆时针旋转90度，绕Y轴顺时针旋转90度\n      const rotationOptions = {\n        rotation: {\n          rotateX: -Math.PI / 2,\n          rotateY: 0,\n          rotateZ: Math.PI / 2\n        }\n      };\n      \n      const geometry = await parseGIFTI(fileContent, rotationOptions);\n      const material = createDefaultMaterial({\n        opacity: opacity.value,\n        transparent: opacity.value < 1\n      });\n      \n      const mesh = new THREE.Mesh(geometry, material);\n      \n      if (currentMesh) {\n        scene.remove(currentMesh);\n        currentMesh.geometry.dispose();\n        currentMesh.material.dispose();\n      }\n\n      currentMesh = mesh;\n      scene.add(mesh);\n      hasSurface.value = true;\n      adjustCameraToObject(camera, mesh);\n      needsRender = true;\n    } catch (error) {\n      console.error('处理GIFTI文件内容时出错:', error);\n    }\n  };\n\n  /**\n   * 从服务器加载标签文件\n   */\n  const loadLabelGIFTIFileFromServer = async (filename) => {\n    try {\n      const response = await fetch(`/cross-species/cross-species_parcellation/${filename}`);\n      if (!response.ok) {\n        throw new Error('Failed to load label file');\n      }\n      const fileContent = await response.text();\n      await loadLabelGIFTIFileContent(fileContent);\n    } catch (error) {\n      console.error('从服务器加载标签文件时出错:', error);\n    }\n  };\n\n  /**\n   * 加载标签文件内容\n   */\n  const loadLabelGIFTIFileContent = async (fileContent) => {\n    try {\n      vertexLabels = await parseLabelGIFTI(fileContent);\n      const uniqueLabels = new Set(vertexLabels);\n      const sortedLabels = Array.from(uniqueLabels).sort((a, b) => a - b);\n      const colors = generateColors(sortedLabels.length);\n      \n      labelColors = {};\n      sortedLabels.forEach((label, index) => {\n        labelColors[label.toString()] = colors[index];\n      });\n\n      hasLabels.value = true;\n      updateVertexColors(currentMesh.geometry, vertexLabels, labelColors);\n      currentMesh.material.vertexColors = true;\n      currentMesh.material.needsUpdate = true;\n      needsRender = true;\n    } catch (error) {\n      console.error('处理标签文件内容时出错:', error);\n    }\n  };\n\n  /**\n   * 从服务器加载TCK文件\n   */\n  const loadTCKFileFromServer = async (filename) => {\n    try {\n      const response = await fetch(`/cross-species/tracks/${filename}`);\n      if (!response.ok) {\n        throw new Error('Failed to load TCK file');\n      }\n      const buffer = await response.arrayBuffer();\n      await loadTCKFileContent(buffer);\n    } catch (error) {\n      console.error('从服务器加载TCK文件时出错:', error);\n    }\n  };\n\n  /**\n   * 加载TCK文件内容\n   */\n  const loadTCKFileContent = async (buffer) => {\n    try {\n      const rotationOptions = {\n        rotation: {\n          rotateX: -Math.PI / 2,\n          rotateY: 0,\n          rotateZ: Math.PI / 2\n        }\n      };\n\n      const fibers = await parseTCK(buffer, rotationOptions);\n      const fiberGroup = buildFiberLines(fibers);\n      currentTracks.push(fiberGroup);\n      scene.add(fiberGroup);\n      hasFibers.value = true;\n\n      if (currentMesh) {\n        adjustCameraToObject(camera, currentMesh);\n      } else if (currentTracks.length > 0) {\n        adjustCameraToObject(camera, currentTracks[0]);\n      }\n      needsRender = true;\n    } catch (error) {\n      console.error('处理TCK文件内容时出错:', error);\n    }\n  };\n\n  // 修改现有的处理函数\n  const handleSurfaceUpload = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      const fileReader = new FileReader();\n      fileReader.onload = async (event) => {\n        await loadGIFTIFileContent(event.target.result);\n      };\n      fileReader.readAsText(file);\n    }\n  };\n\n  const handleLabelUpload = async (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      const fileReader = new FileReader();\n      fileReader.onload = async (event) => {\n        await loadLabelGIFTIFileContent(event.target.result);\n      };\n      fileReader.readAsText(file);\n    }\n  };\n\n  const handleTCKUpload = async (event) => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n\n    try {\n      const files = Array.from(event.target.files);\n      if (files.length > 0) {\n        for (const file of files) {\n          const buffer = await file.arrayBuffer();\n          await loadTCKFileContent(buffer);\n        }\n      }\n    } catch (error) {\n      console.error('加载.tck文件时出错:', error);\n    }\n  };\n\n  /**\n   * 丢弃皮层\n   */\n  const discardSurface = () => {\n    if (currentMesh && hasSurface.value) {\n      \n      // 清除皮层\n      scene.remove(currentMesh);\n      currentMesh.geometry.dispose();\n      currentMesh.material.dispose();\n      hasSurface.value = false;\n      \n      // 清除标签数据\n      if(hasLabels.value) {\n        vertexLabels = null;\n        labelColors = {};\n        hasLabels.value = false;\n      }\n  \n      // 清除顶点信息\n      if (viewMode.value === 'inspect') {\n        clearHighlight();\n        selectedVertex.value = null;\n        vertexInfo.value = null;\n      }\n      needsRender = true;\n      // 清空文件输入\n      if (surfInput.value) surfInput.value.value = '';\n      if (labelInput.value) labelInput.value.value = '';\n\n      // 触发事件通知父组件皮层重置下拉框\n      const event = new CustomEvent('reset-surface-select', {\n        detail: { side }\n      });\n      window.dispatchEvent(event);\n\n      // 触发事件通知父组件标签重置下拉框\n      const event2 = new CustomEvent('reset-label-select', {\n        detail: { side }\n      });\n      window.dispatchEvent(event2);\n    }\n  };\n\n\n  /**\n   * 丢弃标签\n   */\n  const discardLabels = () => {\n    if (currentMesh && hasLabels.value) {\n      const geometry = currentMesh.geometry;\n  \n      // 删除顶点颜色属性\n      if (geometry.getAttribute('color')) {\n        geometry.deleteAttribute('color');\n        geometry.attributes.position.needsUpdate = true;\n      }\n  \n      // 重置材质为统一灰色\n      const material = currentMesh.material;\n      material.vertexColors = false;\n      material.color.set(0x808080);\n      material.needsUpdate = true;\n  \n      // 清除标签数据\n      vertexLabels = null;\n      labelColors = {};\n      hasLabels.value = false;\n  \n      // 清除顶点信息\n      if (viewMode.value === 'inspect') {\n        clearHighlight();\n        selectedVertex.value = null;\n        vertexInfo.value = null;\n      }\n\n      needsRender = true;\n      // 清空文件输入\n      if (labelInput.value) labelInput.value.value = '';\n\n      // 触发事件通知父组件重置下拉框\n      const event = new CustomEvent('reset-label-select', {\n        detail: { side }\n      });\n      window.dispatchEvent(event);\n    }\n  };\n\n  /**\n   * 清空纤维\n   */\n  const clearFibers = () => {\n    if (!currentTracks || !scene) return;\n\n    // 从场景中移除所有纤维并释放资源\n    currentTracks.forEach(track => {\n      if (!track) return;\n\n      if (track.children) {\n        // 如果是Group，遍历其所有子对象\n        track.children.forEach(child => {\n          if (child && scene) {\n            scene.remove(child);\n            if (child.geometry) child.geometry.dispose();\n            if (child.material) child.material.dispose();\n          }\n        });\n        scene.remove(track);\n      } else {\n        // 如果是单个Line对象\n        scene.remove(track);\n        if (track.geometry) track.geometry.dispose();\n        if (track.material) track.material.dispose();\n      }\n    });\n    \n    // 清空数组\n    currentTracks = [];\n    hasFibers.value = false;\n    \n    // 触发重新渲染\n    needsRender = true;\n    // 清空文件输入\n    if (tckInput.value) tckInput.value.value = '';\n  };\n\n  /**\n   * 重置视图\n   */\n  const resetView = () => {\n    if (currentMesh) {\n      adjustCameraToObject(camera, currentMesh, controls);\n    }\n    needsRender = true;\n  };\n\n  /**\n   * 更新透明度\n   */\n  const updateOpacity = () => {\n    if (currentMesh) {\n      updateMaterial(currentMesh.material, {\n        opacity: opacity.value,\n        transparent: opacity.value < 1\n      });\n      needsRender = true;\n    }\n  };\n\n  /**\n   * 处理窗口大小变化\n   */\n  const handleResize = () => {\n    if (!containerRef.value || !renderer || !camera) return;\n    \n    const container = containerRef.value;\n    const width = container.clientWidth;\n    const height = container.clientHeight;\n    camera.aspect = width / height;\n    camera.updateProjectionMatrix();\n    renderer.setSize(width, height);\n    needsRender = true;\n  };\n\n  const fetchFilesFromPublic = async (folder, list_name) => {\n    try {\n      // 在 public 下，你有一个列表文件（可以是 JSON 格式）存放着文件名\n      const response = await fetch(`/cross-species/${folder}/${list_name}`);\n      \n      if (!response.ok) {\n        throw new Error('Failed to load file list');\n      }\n      const fileList = await response.json();\n      return fileList; // 返回文件名数组\n    } catch (error) {\n      console.error('Error fetching file names:', error);\n      return [];\n    }\n  };\n\n  onMounted(() => {\n    initThree();\n    window.addEventListener('resize', handleResize);\n\n    // 获取 surfaces 文件夹中的所有文件名\n    fetchFilesFromPublic('surfaces', 'surfList.json')  // 将响应解析为 JSON\n      .then(data => {\n        surfSysNames.value = data;  // 将文件名数组存储到 surfSysNames\n      })\n      .catch((error) => {\n        console.error('Error fetching files:', error);\n      });\n    \n    // 获取 parcellations 文件夹中的所有文件名\n    fetchFilesFromPublic('cross-species_parcellation', 'parcList.json')  // 将响应解析为 JSON\n      .then(data => {\n        parcSysNames.value = data;  // 将文件名数组存储到 surfSysNames\n      })\n      .catch((error) => {\n        console.error('Error fetching files:', error);\n      });\n    \n    \n  });\n\n  onBeforeUnmount(() => {\n    window.removeEventListener('resize', handleResize);\n    if (renderer) {\n      renderer.domElement.removeEventListener('click', onMouseClick);\n      renderer.dispose();\n    }\n    if (currentMesh) {\n      currentMesh.geometry.dispose();\n      currentMesh.material.dispose();\n    }\n    scene = null;\n    camera = null;\n    renderer = null;\n    controls = null;\n    currentMesh = null;\n    currentTracks = [];\n    vertexLabels = null;\n    labelColors = {};\n    raycaster = null;\n    mouse = null;\n    highlightMaterial = null;\n    highlightMesh = null;\n  });\n\n  return {\n    opacity,\n    hasSurface,\n    hasLabels,\n    hasFibers,\n    surfInput,\n    labelInput,\n    tckInput,\n    viewMode,\n    surfaceCheckTag,\n    vertexInfo,\n    currentMesh,\n    vertexLabels,\n    labelColors,\n    surfSysNames,\n    parcSysNames,\n    handleSurfaceUpload,\n    handleLabelUpload,\n    handleTCKUpload,\n    discardSurface,\n    discardLabels,\n    clearFibers,\n    resetView,\n    updateOpacity,\n    toggleViewMode,\n    surfaceCheck,\n    refreshSurfaceLabel,\n    flushChooseLabelOnSurf,\n    loadGIFTIFileFromServer,\n    loadLabelGIFTIFileFromServer,\n    loadTCKFileFromServer\n  };\n} ","<template>\r\n  <div class=\"three-world\">\r\n    <h1>{{ msg }}</h1>\r\n    <div class=\"canvas-container\">\r\n      <!-- 左侧画布 -->\r\n      <div class=\"canvas-section\">\r\n        <div id=\"three-container-left\" ref=\"threeContainerLeft\" class=\"three-container\"></div>\r\n        <div class=\"control-panel\">\r\n          <div class=\"view-controls\">\r\n            <div class=\"control-group\">\r\n              <button @click=\"resetViewLeft\">重置视图</button>\r\n              <button @click=\"toggleViewModeLeft\" :class=\"{ active: viewModeLeft === 'inspect' }\">\r\n                {{ viewModeLeft === 'browse' ? '检查模式' : '浏览模式' }}\r\n              </button>\r\n              <button @click=\"surfaceCheckLeft\" :disabled=\"!(hasSurfaceLeft && hasLabelsLeft)\" :class=\"{ active: surfaceCheckTagLeft }\">\r\n                {{ surfaceCheckTagLeft ? '取消' : '皮层对齐' }}\r\n              </button>\r\n            </div>\r\n            <div class=\"opacity-control\">\r\n              <label>皮层透明度</label>\r\n              <input type=\"range\" v-model=\"opacityLeft\" min=\"0\" max=\"1\" step=\"0.01\" @input=\"updateOpacityLeft\">\r\n            </div>\r\n            <div v-if=\"viewModeLeft === 'inspect' && vertexInfoLeft\" class=\"vertex-info\">\r\n              <h3>顶点信息</h3>\r\n              <p>索引: {{ vertexInfoLeft.index }}</p>\r\n              <p>位置: X: {{ vertexInfoLeft.position.x }}, Y: {{ vertexInfoLeft.position.y }}, Z: {{ vertexInfoLeft.position.z }}</p>\r\n              <p v-if=\"vertexInfoLeft.label !== undefined\">标签: {{ vertexInfoLeft.label }}</p>\r\n              <p v-if=\"vertexInfoLeft.color\">颜色: R: {{ vertexInfoLeft.color.r }}, G: {{ vertexInfoLeft.color.g }}, B: {{ vertexInfoLeft.color.b }}</p>\r\n            </div>\r\n            <div v-if=\"surfaceCheckTagLeft && vertexInfoLeft\" class=\"vertex-info\">\r\n              <h3>顶点信息</h3>\r\n              <p>索引: {{ vertexInfoLeft.index }}</p>\r\n              <p>位置: X: {{ vertexInfoLeft.position.x }}, Y: {{ vertexInfoLeft.position.y }}, Z: {{ vertexInfoLeft.position.z }}</p>\r\n              <p v-if=\"vertexInfoLeft.label !== undefined\">标签: {{ vertexInfoLeft.label }}</p>\r\n              <p v-if=\"vertexInfoLeft.color\">颜色: R: {{ vertexInfoLeft.color.r }}, G: {{ vertexInfoLeft.color.g }}, B: {{ vertexInfoLeft.color.b }}</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"file-upload\">\r\n            <div class=\"upload-group\">\r\n              <div class=\"title-row\">\r\n                <label>表面文件(.surf.gii)</label>\r\n                <button @click=\"discardSurfaceLeft\" :disabled=\"!hasSurfaceLeft\">丢弃皮层</button>\r\n              </div>\r\n              <div class=\"select-row\">\r\n                <select v-model=\"selectedSurfLeft\" @input=\"handleSurfSelectLeft\"> \r\n                  <option value=\"\">请选择文件</option>\r\n                  <option v-for=\"surfSysName in surfSysNames\" :key=\"surfSysName\" :value=\"surfSysName\">\r\n                    {{ surfSysName }}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n              <div class=\"file-row\">\r\n                <input type=\"file\" @change=\"handleSurfaceUploadLeft\" accept=\".surf.gii\" class=\"inputFileLabel\" ref=\"surfInputLeft\"/>\r\n              </div>\r\n            </div>\r\n            <div class=\"upload-group\">\r\n              <div class=\"title-row\">\r\n                <label>标签文件(.label.gii)</label>\r\n                <button @click=\"discardLabelsLeft\" :disabled=\"!hasLabelsLeft\">丢弃标签</button>\r\n              </div>\r\n              <div class=\"select-row\">\r\n                <select v-model=\"selectedParcLeft\" @input=\"handleParcSelectLeft\"> \r\n                  <option value=\"\">请选择文件</option>\r\n                  <option v-for=\"parcSysName in parcSysNames\" :key=\"parcSysName\" :value=\"parcSysName\">\r\n                    {{ parcSysName }}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n              <div class=\"file-row\">\r\n                <input type=\"file\" @change=\"handleLabelUploadLeft\" accept=\".label.gii\" class=\"inputFileLabel\" ref=\"labelInputLeft\"/>\r\n              </div>\r\n            </div>\r\n            <div class=\"upload-group\">\r\n              <div class=\"title-row\">\r\n                <label>纤维文件(.tck)</label>\r\n                <button @click=\"clearFibersLeft\" :disabled=\"!hasFibersLeft\">清空纤维</button>\r\n              </div>\r\n              <input type=\"file\" @change=\"handleTCKUploadLeft\" accept=\".tck\" multiple class=\"inputFileLabel\" ref=\"tckInputLeft\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 右侧画布 -->\r\n      <div class=\"canvas-section\">\r\n        <div id=\"three-container-right\" ref=\"threeContainerRight\" class=\"three-container\"></div>\r\n        <div class=\"control-panel\">\r\n          <div class=\"view-controls\">\r\n            <div class=\"control-group\">\r\n              <button @click=\"resetViewRight\">重置视图</button>\r\n              <button @click=\"toggleViewModeRight\" :class=\"{ active: viewModeRight === 'inspect' }\">\r\n                {{ viewModeRight === 'browse' ? '检查模式' : '浏览模式' }}\r\n              </button>\r\n              <button @click=\"surfaceCheckRight\" :disabled=\"!(hasSurfaceRight && hasLabelsRight)\" :class=\"{ active: surfaceCheckTagRight }\">\r\n                {{ surfaceCheckTagRight ? '取消' : '皮层对齐' }}\r\n              </button>\r\n            </div>\r\n            <div class=\"opacity-control\">\r\n              <label>皮层透明度</label>\r\n              <input type=\"range\" v-model=\"opacityRight\" min=\"0\" max=\"1\" step=\"0.01\" @input=\"updateOpacityRight\">\r\n            </div>\r\n            <div v-if=\"viewModeRight === 'inspect' && vertexInfoRight\" class=\"vertex-info\">\r\n              <h3>顶点信息</h3>\r\n              <p>索引: {{ vertexInfoRight.index }}</p>\r\n              <p>位置: X: {{ vertexInfoRight.position.x }}, Y: {{ vertexInfoRight.position.y }}, Z: {{ vertexInfoRight.position.z }}</p>\r\n              <p v-if=\"vertexInfoRight.label !== undefined\">标签: {{ vertexInfoRight.label }}</p>\r\n              <p v-if=\"vertexInfoRight.color\">颜色: R: {{ vertexInfoRight.color.r }}, G: {{ vertexInfoRight.color.g }}, B: {{ vertexInfoRight.color.b }}</p>\r\n            </div>\r\n            <div v-if=\"surfaceCheckTagRight && vertexInfoRight\" class=\"vertex-info\">\r\n              <h3>顶点信息</h3>\r\n              <p>索引: {{ vertexInfoRight.index }}</p>\r\n              <p>位置: X: {{ vertexInfoRight.position.x }}, Y: {{ vertexInfoRight.position.y }}, Z: {{ vertexInfoRight.position.z }}</p>\r\n              <p v-if=\"vertexInfoRight.label !== undefined\">标签: {{ vertexInfoRight.label }}</p>\r\n              <p v-if=\"vertexInfoRight.color\">颜色: R: {{ vertexInfoRight.color.r }}, G: {{ vertexInfoRight.color.g }}, B: {{ vertexInfoRight.color.b }}</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"file-upload\">\r\n            <div class=\"upload-group\">\r\n              <div class=\"title-row\">\r\n                <label>表面文件(.surf.gii)</label>\r\n                <button @click=\"discardSurfaceRight\" :disabled=\"!hasSurfaceRight\">丢弃皮层</button>\r\n              </div>\r\n              <div class=\"select-row\">\r\n                <select v-model=\"selectedSurfRight\" @input=\"handleSurfSelectRight\"> \r\n                  <option value=\"\">请选择文件</option>\r\n                  <option v-for=\"surfSysName in surfSysNames\" :key=\"surfSysName\" :value=\"surfSysName\">\r\n                    {{ surfSysName }}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n              <div class=\"file-row\">\r\n                <input type=\"file\" @change=\"handleSurfaceUploadRight\" accept=\".surf.gii\" class=\"inputFileLabel\" ref=\"surfInputRight\"/>\r\n              </div>\r\n            </div>\r\n            <div class=\"upload-group\">\r\n              <div class=\"title-row\">\r\n                <label>标签文件(.label.gii)</label>\r\n                <button @click=\"discardLabelsRight\" :disabled=\"!hasLabelsRight\">丢弃标签</button>\r\n              </div>\r\n              <div class=\"select-row\">\r\n                <select v-model=\"selectedParcRight\" @input=\"handleParcSelectRight\"> \r\n                  <option value=\"\">请选择文件</option>\r\n                  <option v-for=\"parcSysName in parcSysNames\" :key=\"parcSysName\" :value=\"parcSysName\">\r\n                    {{ parcSysName }}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n              <div class=\"file-row\">\r\n                <input type=\"file\" @change=\"handleLabelUploadRight\" accept=\".label.gii\" class=\"inputFileLabel\" ref=\"labelInputRight\"/>\r\n              </div>\r\n            </div>\r\n            <div class=\"upload-group\">\r\n              <div class=\"title-row\">\r\n                <label>纤维文件(.tck)</label>\r\n                <button @click=\"clearFibersRight\" :disabled=\"!hasFibersRight\">清空纤维</button>\r\n              </div>\r\n              <input type=\"file\" @change=\"handleTCKUploadRight\" accept=\".tck\" multiple class=\"inputFileLabel\" ref=\"tckInputRight\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, nextTick, onMounted, onBeforeUnmount } from 'vue';\r\nimport { useThreeWorld } from './ThreeWorld';\r\nimport './styles.css';\r\n\r\nexport default {\r\n  name: 'ThreeWorld',\r\n  props: {\r\n    msg: String\r\n  },\r\n  setup() {\r\n    const threeContainerLeft = ref(null);\r\n    const threeContainerRight = ref(null);\r\n\r\n    const sharedState = reactive({\r\n      left: null,   // 占位，稍后赋值\r\n      right: null   // 占位，稍后赋值\r\n    });\r\n\r\n    const leftWorld = useThreeWorld(threeContainerLeft, sharedState, 'left');\r\n    const rightWorld = useThreeWorld(threeContainerRight, sharedState, 'right');\r\n\r\n    // 添加下拉框的响应式数据\r\n    const selectedSurfLeft = ref('');\r\n    const selectedParcLeft = ref('');\r\n    const selectedSurfRight = ref('');\r\n    const selectedParcRight = ref('');\r\n\r\n    // 添加事件监听器\r\n    onMounted(() => {\r\n      window.addEventListener('reset-surface-select', (event) => {\r\n        if (event.detail.side === 'left') {\r\n          selectedSurfLeft.value = '';\r\n        } else {\r\n          selectedSurfRight.value = '';\r\n        }\r\n      });\r\n\r\n      window.addEventListener('reset-label-select', (event) => {\r\n        if (event.detail.side === 'left') {\r\n          selectedParcLeft.value = '';\r\n        } else {\r\n          selectedParcRight.value = '';\r\n        }\r\n      });\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n      window.removeEventListener('reset-surface-select', () => {});\r\n      window.removeEventListener('reset-label-select', () => {});\r\n    });\r\n\r\n    nextTick(() => {\r\n      sharedState.left = leftWorld;\r\n      sharedState.right = rightWorld;\r\n    });\r\n\r\n    // 添加处理函数\r\n    const handleSurfSelectLeft = async (event) => {\r\n      const filename = event.target.value;\r\n      if (filename) {\r\n        await leftWorld.loadGIFTIFileFromServer(filename);\r\n      }\r\n    };\r\n\r\n    const handleParcSelectLeft = async (event) => {\r\n      const filename = event.target.value;\r\n      if (filename) {\r\n        await leftWorld.loadLabelGIFTIFileFromServer(filename);\r\n      }\r\n    };\r\n\r\n    const handleSurfSelectRight = async (event) => {\r\n      const filename = event.target.value;\r\n      if (filename) {\r\n        await rightWorld.loadGIFTIFileFromServer(filename);\r\n      }\r\n    };\r\n\r\n    const handleParcSelectRight = async (event) => {\r\n      const filename = event.target.value;\r\n      if (filename) {\r\n        await rightWorld.loadLabelGIFTIFileFromServer(filename);\r\n      }\r\n    };\r\n\r\n    return {\r\n      threeContainerLeft,\r\n      threeContainerRight,\r\n      \r\n      // 公共\r\n      surfSysNames: leftWorld.surfSysNames,\r\n      parcSysNames: leftWorld.parcSysNames,\r\n      \r\n      // 左侧画布\r\n      opacityLeft: leftWorld.opacity,\r\n      hasSurfaceLeft: leftWorld.hasSurface,\r\n      hasLabelsLeft: leftWorld.hasLabels,\r\n      hasFibersLeft: leftWorld.hasFibers,\r\n      surfInputLeft: leftWorld.surfInput,\r\n      labelInputLeft: leftWorld.labelInput,\r\n      tckInputLeft: leftWorld.tckInput,\r\n      viewModeLeft: leftWorld.viewMode,\r\n      surfaceCheckTagLeft: leftWorld.surfaceCheckTag,\r\n      vertexInfoLeft: leftWorld.vertexInfo,\r\n      \r\n      handleSurfaceUploadLeft: leftWorld.handleSurfaceUpload,\r\n      handleLabelUploadLeft: leftWorld.handleLabelUpload,\r\n      handleTCKUploadLeft: leftWorld.handleTCKUpload,\r\n      discardSurfaceLeft: leftWorld.discardSurface,\r\n      discardLabelsLeft: leftWorld.discardLabels,\r\n      clearFibersLeft: leftWorld.clearFibers,\r\n      resetViewLeft: leftWorld.resetView,\r\n      updateOpacityLeft: leftWorld.updateOpacity,\r\n      toggleViewModeLeft: leftWorld.toggleViewMode,\r\n      surfaceCheckLeft: leftWorld.surfaceCheck,\r\n      // 右侧画布\r\n      opacityRight: rightWorld.opacity,\r\n      hasSurfaceRight: rightWorld.hasSurface,\r\n      hasLabelsRight: rightWorld.hasLabels,\r\n      hasFibersRight: rightWorld.hasFibers,\r\n      surfInputRight: rightWorld.surfInput,\r\n      labelInputRight: rightWorld.labelInput,\r\n      tckInputRight: rightWorld.tckInput,\r\n      viewModeRight: rightWorld.viewMode,\r\n      surfaceCheckTagRight: rightWorld.surfaceCheckTag,\r\n      vertexInfoRight: rightWorld.vertexInfo,\r\n      handleSurfaceUploadRight: rightWorld.handleSurfaceUpload,\r\n      handleLabelUploadRight: rightWorld.handleLabelUpload,\r\n      handleTCKUploadRight: rightWorld.handleTCKUpload,\r\n      discardSurfaceRight: rightWorld.discardSurface,\r\n      discardLabelsRight: rightWorld.discardLabels,\r\n      clearFibersRight: rightWorld.clearFibers,\r\n      resetViewRight: rightWorld.resetView,\r\n      updateOpacityRight: rightWorld.updateOpacity,\r\n      toggleViewModeRight: rightWorld.toggleViewMode,\r\n      surfaceCheckRight: rightWorld.surfaceCheck,\r\n      // 添加下拉框的数据\r\n      selectedSurfLeft,\r\n      selectedParcLeft,\r\n      selectedSurfRight,\r\n      selectedParcRight,\r\n      handleSurfSelectLeft,\r\n      handleParcSelectLeft,\r\n      handleSurfSelectRight,\r\n      handleParcSelectRight\r\n    };\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=407cf4cd\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <ThreeWorld :msg=\"msg\" />\n</template>\n\n<script>\nimport ThreeWorld from './ThreeWorld/index.vue';\n\nexport default {\n  name: 'ThreeWorldWrapper',\n  components: {\n    ThreeWorld\n  },\n  props: {\n    msg: String\n  }\n}\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ThreeWorld.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ThreeWorld.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ThreeWorld.vue?vue&type=template&id=575ea95d\"\nimport script from \"./ThreeWorld.vue?vue&type=script&lang=js\"\nexport * from \"./ThreeWorld.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <ThreeWorld msg=\"Surface and Tractography 3D Viewer\"/>\n  </div>\n</template>\n\n<script>\nimport ThreeWorld from './components/ThreeWorld.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    ThreeWorld\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin: 0;\n  padding: 0;\n  height: 100vh;\n}\nbody {\n  margin: 0;\n  padding: 0;\n}\n</style>\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=30889d3a\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=30889d3a&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkcross_species_platform\"] = self[\"webpackChunkcross_species_platform\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(3777); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","attrs","staticRenderFns","msg","staticClass","_v","_s","ref","on","resetViewLeft","class","active","viewModeLeft","toggleViewModeLeft","surfaceCheckTagLeft","hasSurfaceLeft","hasLabelsLeft","surfaceCheckLeft","directives","name","rawName","value","opacityLeft","expression","domProps","updateOpacityLeft","$event","target","vertexInfoLeft","index","position","x","y","z","undefined","label","_e","color","r","g","b","discardSurfaceLeft","selectedSurfLeft","handleSurfSelectLeft","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","multiple","_l","surfSysNames","surfSysName","key","handleSurfaceUploadLeft","discardLabelsLeft","selectedParcLeft","handleParcSelectLeft","parcSysNames","parcSysName","handleLabelUploadLeft","hasFibersLeft","clearFibersLeft","handleTCKUploadLeft","resetViewRight","viewModeRight","toggleViewModeRight","surfaceCheckTagRight","hasSurfaceRight","hasLabelsRight","surfaceCheckRight","opacityRight","updateOpacityRight","vertexInfoRight","discardSurfaceRight","selectedSurfRight","handleSurfSelectRight","handleSurfaceUploadRight","discardLabelsRight","selectedParcRight","handleParcSelectRight","handleLabelUploadRight","hasFibersRight","clearFibersRight","handleTCKUploadRight","setupLights","scene","ambientLight","THREE","add","directionalLights","intensity","lights","config","light","set","createDefaultMaterial","opacity","vertexColors","shininess","specular","side","transparent","updateMaterial","material","Object","entries","forEach","needsUpdate","buildFiberLines","fibers","group","center","totalPoints","fiber","i","length","divideScalar","rgbColor","hsl","getHSL","baseColor","h","s","l","baseMaterial","linewidth","geometry","positions","Float32Array","flat","setAttribute","hueVariation","Math","random","saturationVariation","lightnessVariation","setHSL","max","min","clone","copy","line","rotatePoints","pointsArray","rotateX","rotateY","rotateZ","rotationMatrix","makeRotationFromEuler","vector","applyMatrix4","decodeBase64Gzip","base64String","cleanBase64","replace","binaryString","atob","bytes","Uint8Array","charCodeAt","pako","buffer","async","parseGIFTI","content","parser","DOMParser","xmlDoc","parseFromString","dataArrays","getElementsByTagName","pointsData","facesData","dataArray","intent","getAttribute","base64Data","querySelector","textContent","trim","Error","pointsBuffer","facesBuffer","facesArray","Uint32Array","rotation","temp","setIndex","computeVertexNormals","computeBoundingBox","computeBoundingSphere","parseLabelGIFTI","labelBuffer","Int32Array","generateColors","count","colors","hue","saturation","c","abs","m","updateVertexColors","labels","labelColors","vertexCount","attributes","defaultColor","toString","createCamera","width","height","camera","createControls","domElement","controls","OrbitControls","enableDamping","dampingFactor","minDistance","maxDistance","rotateSpeed","zoomSpeed","panSpeed","adjustCameraToObject","object","box","setFromObject","getCenter","size","getSize","maxDim","fov","PI","cameraZ","tan","lookAt","parseTCK","dataView","DataView","decoder","TextDecoder","uint8Array","headerText","headerEnd","slice","decode","headerLines","split","header","commandHistory","startsWith","push","includes","fileOffset","match","parseInt","isLittleEndian","isFloat32","bytesPerFloat","floatReader","offset","getFloat32","getFloat64","tracts","currentTract","nanCount","infCount","done","numTracts","console","log","byteLength","Number","isNaN","Infinity","useThreeWorld","containerRef","sharedState","hasSurface","hasLabels","hasFibers","viewMode","surfaceCheckTag","selectedVertex","vertexInfo","surfInput","labelInput","tckInput","renderer","currentMesh","currentTracks","vertexLabels","needsRender","raycaster","mouse","highlightMaterial","highlightMesh","chooseLabel","initThree","background","container","clientWidth","clientHeight","antialias","alpha","depth","stencil","preserveDrawingBuffer","powerPreference","setSize","setClearColor","setPixelRatio","window","devicePixelRatio","appendChild","addEventListener","onMouseClick","animate","requestAnimationFrame","enabled","update","event","rect","getBoundingClientRect","clientX","left","clientY","top","setFromCamera","intersects","intersectObject","intersect","vertexIndex","face","a","vertexPosition","getX","getY","getZ","highlightVertex","toFixed","flushChooseLabelOnSurf","otherSide","otherWorld","clearHighlight","cho_label","filteredLabels","refreshSurfaceLabel","high_geometry","depthTest","depthWrite","remove","dispose","toggleViewMode","surfaceCheck","loadGIFTIFileFromServer","response","fetch","filename","ok","fileContent","text","loadGIFTIFileContent","error","rotationOptions","mesh","loadLabelGIFTIFileFromServer","loadLabelGIFTIFileContent","uniqueLabels","Set","sortedLabels","from","sort","loadTCKFileFromServer","arrayBuffer","loadTCKFileContent","fiberGroup","handleSurfaceUpload","file","files","fileReader","FileReader","onload","result","readAsText","handleLabelUpload","handleTCKUpload","discardSurface","CustomEvent","detail","dispatchEvent","event2","discardLabels","deleteAttribute","clearFibers","track","children","child","resetView","updateOpacity","handleResize","aspect","updateProjectionMatrix","fetchFilesFromPublic","folder","list_name","fileList","json","onMounted","then","data","catch","onBeforeUnmount","removeEventListener","props","String","setup","threeContainerLeft","threeContainerRight","reactive","right","leftWorld","rightWorld","nextTick","surfInputLeft","labelInputLeft","tckInputLeft","surfInputRight","labelInputRight","tckInputRight","component","components","ThreeWorld","Vue","productionTip","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","deferred","O","chunkIds","fn","priority","notFulfilled","fulfilled","j","keys","every","splice","n","getter","__esModule","d","definition","defineProperty","enumerable","get","globalThis","Function","e","obj","prop","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}